#!/usr/bin/env node
import{Command}from"commander";import inquirer from"inquirer";import{execa}from"execa";function __awaiter(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const COMMITTYPE=[{name:"feat: 新功能",value:"feat: "},{name:"fix: 修补Bug",value:"fix: "},{name:"docs: 文档类",value:"docs: "},{name:"style: 格式类，不涉及到逻辑",value:"style: "},{name:"refactor: 代码重构",value:"refactor: "},{name:"perf: 优化相关",value:"perf: "},{name:"test: 测试用例，包括单元测试、集成测试等",value:"test: "},{name:"chore: 改变构建流程、或者增加依赖库、工具等",value:"chore: "},{name:"revert: 版本回滚",value:"revert:"}],RabaseType=[{name:"continue：手动解决冲突后继续Rebase",value:"--continue"},{name:"abort：不执行Rebase，回到之前状态",value:"--abort"}];class CommitCommand{constructor(options){this.msg=options.msg,this.files=options.files||[]}execute(){return __awaiter(this,void 0,void 0,(function*(){try{const args=[...this.files,"-m",this.msg];return yield execa("git",["commit",...args])}catch(error){throw error instanceof Error&&outputRes(`提交更改时出错[git commit]: ${error.message}`,124),error}}))}}class AddCommand{constructor(options){this.files=options.files||[]}execute(){return __awaiter(this,void 0,void 0,(function*(){try{const args=this.files.length>0?this.files:["-A"];return yield execa("git",["add",...args])}catch(error){throw error instanceof Error&&outputRes(`向暂存区添加更改时出错[git add]: ${error.message}`,124),error}}))}}class CheckoutCommand{constructor(branchOrCommit){this.branchOrCommit=branchOrCommit}execute(){return __awaiter(this,void 0,void 0,(function*(){try{return yield execa("git",["checkout",this.branchOrCommit])}catch(error){throw error instanceof Error&&outputRes(`切换分支或恢复操作出错[git checkout: ${this.branchOrCommit}] ${error.message}`,124),error}}))}}class PullCommand{constructor(options={}){this.rebase=options.rebase||!1}execute(){return __awaiter(this,void 0,void 0,(function*(){try{const args=this.rebase?["--rebase"]:[];return yield execa("git",["pull",...args])}catch(error){throw error instanceof Error&&outputRes(`拉取远程分支时出错[git pull]: ${error.message}`,124),error}}))}}class RebaseCommand{constructor(options){this.branch=options.branch,this.shouldContinue=options.continue,this.shouldAbort=options.abort}validateOptions(){if(1!==[void 0!==this.branch,this.shouldContinue,this.shouldAbort].filter(Boolean).length)throw new Error("请指定一个操作：branch进行rebase，或--continue，或--abort")}execute(){return __awaiter(this,void 0,void 0,(function*(){this.validateOptions();let args=[];this.shouldContinue?args=["rebase","--continue"]:this.shouldAbort?args=["rebase","--abort"]:this.branch&&(args=["rebase",this.branch]);try{return yield execa("git",args)}catch(error){if(error instanceof Error){let errorMessage="执行rebase时出错:";this.shouldContinue?errorMessage+=" 继续rebase":this.shouldAbort?errorMessage+=" 中止rebase":errorMessage+=` 到分支[${this.branch}]`,errorMessage+=` [git ${args.join(" ")}]: ${error.message}`,outputRes(errorMessage,124)}throw error}}))}}class StatusCommand{execute(){return __awaiter(this,void 0,void 0,(function*(){try{return yield execa("git",["status"])}catch(error){throw error instanceof Error&&outputRes(`状态查询出错[git status]: ${error.message}`,124),error}}))}}class BranchCommand{constructor(optopns){this.options=optopns}execute(){return __awaiter(this,void 0,void 0,(function*(){try{if(!this.options)return yield this.viewBranch({all:!1});switch(!0){case"branchName"in this.options:return"fromBranch"in this.options?yield this.createBranch(this.options):"force"in this.options?yield this.deleteBranch(this.options):yield this.createBranch(this.options);case"all"in this.options:return yield this.viewBranch(this.options);default:return yield this.viewBranch({all:!1})}}catch(error){throw error instanceof Error&&outputRes(`执行Git分支命令时出错: ${error.message}`,124),error}}))}createBranch(options){return __awaiter(this,void 0,void 0,(function*(){return yield execa("git",["branch",options.branchName,...options.fromBranch?[options.fromBranch]:[]])}))}deleteBranch(options){return __awaiter(this,void 0,void 0,(function*(){const args=options.force?["-D"]:["-d"];return yield execa("git",["branch",...args,options.branchName])}))}viewBranch(){return __awaiter(this,arguments,void 0,(function*(options={all:!1}){const args=options.all?["-a"]:[];return yield execa("git",["branch",...args])}))}}class PushCommand{execute(){return __awaiter(this,void 0,void 0,(function*(){try{return yield execa("git",["push"])}catch(error){throw error instanceof Error&&outputRes(`推送远端出错[git push]: ${error.message}`,124),error}}))}}class FetchCommand{constructor(options={}){this.remote=options.remote||"origin",this.branch=options.branch||"master"}execute(){return __awaiter(this,void 0,void 0,(function*(){try{const args=[this.remote,this.branch];return yield execa("git",["fetch",...args])}catch(error){throw error instanceof Error&&outputRes(`拉取远程分支时出错[git fetch]: ${error.message}`,124),error}}))}}class MergeCommand{constructor(options){this.options=options}execute(){return __awaiter(this,void 0,void 0,(function*(){const args=["merge",this.options.branchName];try{return yield execa("git",args)}catch(error){throw error instanceof Error&&outputRes(`合并分支出错[git ${args.join(" ")}]: ${error.message}`,124),error}}))}}class LogCommand{constructor(options){this.options=options}execute(){return __awaiter(this,void 0,void 0,(function*(){var _a,_b;try{const args=["log"];(null===(_a=this.options)||void 0===_a?void 0:_a.limit)&&args.push(`-${this.options.limit}`),(null===(_b=this.options)||void 0===_b?void 0:_b.author)&&args.push(`--author=${this.options.author}`);const _res=yield execa("git",args);return console.log(_res.stdout),_res}catch(error){throw error instanceof Error&&outputRes(`获取日志出错[git log]: ${error.message}`,124),error}}))}}class GitInvoker{constructor(){this.commands=new Map,this.registerCommands([CommitCommand,AddCommand,CheckoutCommand,PullCommand,RebaseCommand,StatusCommand,BranchCommand,PushCommand,FetchCommand,MergeCommand,LogCommand])}registerCommands(commandClasses){var _a,_b;for(const CommandClass of commandClasses){const commandName=null===(_b=null===(_a=CommandClass.name)||void 0===_a?void 0:_a.replace("Command",""))||void 0===_b?void 0:_b.toLowerCase();this.commands.set(commandName,CommandClass)}}executeCmd(commandName,args){return __awaiter(this,void 0,void 0,(function*(){const CommandClass=this.commands.get(commandName);if(CommandClass)try{const commandInstance=new CommandClass(args);return yield commandInstance.execute()}catch(error){}else console.warn(`未知的EGit命令: ${commandName}`)}))}}function getDefaultExportFromCjs(x){return x&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")?x.default:x}var isImplemented$9,hasRequiredIsImplemented$6,noop,hasRequiredNoop,isValue$6,hasRequiredIsValue,shim$8,hasRequiredShim$8,keys$1,hasRequiredKeys,validValue,hasRequiredValidValue,shim$7,hasRequiredShim$7,d$4={exports:{}},is$6=function(value){return null!=value},isValue$7=is$6,possibleTypes={object:!0,function:!0,undefined:!0},is$5=function(value){return!!isValue$7(value)&&hasOwnProperty.call(possibleTypes,typeof value)},isObject$2=is$5,isPrototype=function(value){if(!isObject$2(value))return!1;try{return!!value.constructor&&value.constructor.prototype===value}catch(error){return!1}},isFunction$1=function(value){if("function"!=typeof value)return!1;if(!hasOwnProperty.call(value,"length"))return!1;try{if("number"!=typeof value.length)return!1;if("function"!=typeof value.call)return!1;if("function"!=typeof value.apply)return!1}catch(error){return!1}return!isPrototype(value)},classRe=/^\s*class[\s{/}]/,functionToString=Function.prototype.toString,is$2=function(value){return!!isFunction$1(value)&&!classRe.test(functionToString.call(value))};function requireIsValue(){if(hasRequiredIsValue)return isValue$6;hasRequiredIsValue=1;var _undefined=(hasRequiredNoop?noop:(hasRequiredNoop=1,noop=function(){}))();return isValue$6=function(val){return val!==_undefined&&null!==val}}function requireKeys(){return hasRequiredKeys||(hasRequiredKeys=1,keys$1=(hasRequiredIsImplemented$6?isImplemented$9:(hasRequiredIsImplemented$6=1,isImplemented$9=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}))()?Object.keys:function(){if(hasRequiredShim$8)return shim$8;hasRequiredShim$8=1;var isValue=requireIsValue(),keys=Object.keys;return shim$8=function(object){return keys(isValue(object)?Object(object):object)}}()),keys$1}function requireValidValue(){if(hasRequiredValidValue)return validValue;hasRequiredValidValue=1;var isValue=requireIsValue();return validValue=function(value){if(!isValue(value))throw new TypeError("Cannot use null or undefined");return value},validValue}var shim$6,hasRequiredShim$6,assign$3=function(){var obj,assign=Object.assign;return"function"==typeof assign&&(assign(obj={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),obj.foo+obj.bar+obj.trzy==="razdwatrzy")}()?Object.assign:function(){if(hasRequiredShim$7)return shim$7;hasRequiredShim$7=1;var keys=requireKeys(),value=requireValidValue(),max=Math.max;return shim$7=function(dest,src){var error,i,assign,length=max(arguments.length,2);for(dest=Object(value(dest)),assign=function(key){try{dest[key]=src[key]}catch(e){error||(error=e)}},i=1;i<length;++i)keys(src=arguments[i]).forEach(assign);if(void 0!==error)throw error;return dest},shim$7}(),isValue$5=requireIsValue(),forEach$6=Array.prototype.forEach,create$3=Object.create,normalizeOptions=function(opts1){var result=create$3(null);return forEach$6.call(arguments,(function(options){isValue$5(options)&&function(src,obj){var key;for(key in src)obj[key]=src[key]}(Object(options),result)})),result},str="razdwatrzy";var contains$2="function"==typeof str.contains&&!0===str.contains("dwa")&&!1===str.contains("foo")?String.prototype.contains:function(){if(hasRequiredShim$6)return shim$6;hasRequiredShim$6=1;var indexOf=String.prototype.indexOf;return shim$6=function(searchString){return indexOf.call(this,searchString,arguments[1])>-1},shim$6}(),isValue$4=is$6,isPlainFunction$1=is$2,assign$2=assign$3,normalizeOpts$2=normalizeOptions,contains$1=contains$2,d$3=d$4.exports=function(dscr,value){var c,e,w,options,desc;return arguments.length<2||"string"!=typeof dscr?(options=value,value=dscr,dscr=null):options=arguments[2],isValue$4(dscr)?(c=contains$1.call(dscr,"c"),e=contains$1.call(dscr,"e"),w=contains$1.call(dscr,"w")):(c=w=!0,e=!1),desc={value:value,configurable:c,enumerable:e,writable:w},options?assign$2(normalizeOpts$2(options),desc):desc};d$3.gs=function(dscr,get,set){var c,e,options,desc;return"string"!=typeof dscr?(options=set,set=get,get=dscr,dscr=null):options=arguments[3],isValue$4(get)?isPlainFunction$1(get)?isValue$4(set)?isPlainFunction$1(set)||(options=set,set=void 0):set=void 0:(options=get,get=set=void 0):get=void 0,isValue$4(dscr)?(c=contains$1.call(dscr,"c"),e=contains$1.call(dscr,"e")):(c=!0,e=!1),desc={get:get,set:set,configurable:c,enumerable:e},options?assign$2(normalizeOpts$2(options),desc):desc};var validCallable,hasRequiredValidCallable,dExports=d$4.exports;function requireValidCallable(){return hasRequiredValidCallable?validCallable:(hasRequiredValidCallable=1,validCallable=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn})}var method,defVal,isObject$1,hasRequiredIsObject,create_1,hasRequiredCreate,shim$5,hasRequiredShim$5,callable$6=requireValidCallable(),value$3=requireValidValue(),bind=Function.prototype.bind,call$4=Function.prototype.call,keys=Object.keys,objPropertyIsEnumerable$1=Object.prototype.propertyIsEnumerable,forEach$5=(method="forEach",function(obj,cb){var list,thisArg=arguments[2],compareFn=arguments[3];return obj=Object(value$3(obj)),callable$6(cb),list=keys(obj),compareFn&&list.sort("function"==typeof compareFn?bind.call(compareFn,obj):void 0),"function"!=typeof method&&(method=list[method]),call$4.call(method,list,(function(key,index){return objPropertyIsEnumerable$1.call(obj,key)?call$4.call(cb,thisArg,obj[key],key,obj,index):defVal}))}),callable$5=requireValidCallable(),forEach$4=forEach$5,call$3=Function.prototype.call,map$2=function(obj,cb){var result={},thisArg=arguments[2];return callable$5(cb),forEach$4(obj,(function(value,key,targetObj,index){result[key]=call$3.call(cb,thisArg,value,key,targetObj,index)})),result},forEach$3=Array.prototype.forEach,create$2=Object.create,primitiveSet$1=function(arg){var set=create$2(null);return forEach$3.call(arguments,(function(name){set[name]=!0})),set},create$1=Object.create,getPrototypeOf$1=Object.getPrototypeOf,plainObject={},isImplemented$7=function(){var setPrototypeOf=Object.setPrototypeOf;return"function"==typeof setPrototypeOf&&getPrototypeOf$1(setPrototypeOf((arguments[0]||create$1)(null),plainObject))===plainObject};function requireIsObject(){if(hasRequiredIsObject)return isObject$1;hasRequiredIsObject=1;var isValue=requireIsValue(),map={function:!0,object:!0};return isObject$1=function(value){return isValue(value)&&map[typeof value]||!1},isObject$1}function requireShim$5(){if(hasRequiredShim$5)return shim$5;hasRequiredShim$5=1;var validate,status,fn,set,isObject=requireIsObject(),value=requireValidValue(),objIsPrototypeOf=Object.prototype.isPrototypeOf,defineProperty=Object.defineProperty,nullDesc={configurable:!0,enumerable:!1,writable:!0,value:void 0};return validate=function(obj,prototype){if(value(obj),null===prototype||isObject(prototype))return obj;throw new TypeError("Prototype must be null or an object")},status=function(){var set,tmpObj1=Object.create(null),tmpObj2={},desc=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(desc){try{(set=desc.set).call(tmpObj1,tmpObj2)}catch(ignore){}if(Object.getPrototypeOf(tmpObj1)===tmpObj2)return{set:set,level:2}}return tmpObj1.__proto__=tmpObj2,Object.getPrototypeOf(tmpObj1)===tmpObj2?{level:2}:((tmpObj1={}).__proto__=tmpObj2,Object.getPrototypeOf(tmpObj1)===tmpObj2&&{level:1})}(),shim$5=status?(2===status.level?status.set?(set=status.set,fn=function(obj,prototype){return set.call(validate(obj,prototype),prototype),obj}):fn=function(obj,prototype){return validate(obj,prototype).__proto__=prototype,obj}:fn=function self(obj,prototype){var isNullBase;return validate(obj,prototype),(isNullBase=objIsPrototypeOf.call(self.nullPolyfill,obj))&&delete self.nullPolyfill.__proto__,null===prototype&&(prototype=self.nullPolyfill),obj.__proto__=prototype,isNullBase&&defineProperty(self.nullPolyfill,"__proto__",nullDesc),obj},Object.defineProperty(fn,"level",{configurable:!1,enumerable:!1,writable:!1,value:status.level})):null,function(){if(hasRequiredCreate)return create_1;hasRequiredCreate=1;var shim,nullObject,polyProps,desc,create=Object.create;isImplemented$7()||(shim=requireShim$5()),create_1=shim?1!==shim.level?create:(nullObject={},polyProps={},desc={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach((function(name){polyProps[name]="__proto__"!==name?desc:{configurable:!0,enumerable:!1,writable:!0,value:void 0}})),Object.defineProperties(nullObject,polyProps),Object.defineProperty(shim,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:nullObject}),function(prototype,props){return create(null===prototype?nullObject:prototype,props)}):create}(),shim$5}var isImplemented$6,hasRequiredIsImplemented$5,shim$4,hasRequiredShim$4,sign,hasRequiredSign,toInteger,hasRequiredToInteger,toPosInteger,hasRequiredToPosInteger,setPrototypeOf$1=isImplemented$7()?Object.setPrototypeOf:requireShim$5();function requireSign(){return hasRequiredSign||(hasRequiredSign=1,sign=(hasRequiredIsImplemented$5||(hasRequiredIsImplemented$5=1,isImplemented$6=function(){var sign=Math.sign;return"function"==typeof sign&&1===sign(10)&&-1===sign(-20)}),isImplemented$6)()?Math.sign:(hasRequiredShim$4||(hasRequiredShim$4=1,shim$4=function(value){return value=Number(value),isNaN(value)||0===value?value:value>0?1:-1}),shim$4)),sign}function requireToInteger(){if(hasRequiredToInteger)return toInteger;hasRequiredToInteger=1;var sign=requireSign(),abs=Math.abs,floor=Math.floor;return toInteger=function(value){return isNaN(value)?0:0!==(value=Number(value))&&isFinite(value)?sign(value)*floor(abs(value)):value},toInteger}function requireToPosInteger(){if(hasRequiredToPosInteger)return toPosInteger;hasRequiredToPosInteger=1;var toInteger=requireToInteger(),max=Math.max;return toPosInteger=function(value){return max(0,toInteger(value))},toPosInteger}var toPosInt$2=requireToPosInteger(),resolveLength$3=function(optsLength,fnLength,isAsync){var length;return isNaN(optsLength)?(length=fnLength)>=0?isAsync&&length?length-1:length:1:!1!==optsLength&&toPosInt$2(optsLength)},registeredExtensions={},custom={exports:{}};!function(module){var assign=assign$3,isObject=requireIsObject(),isValue=requireIsValue(),captureStackTrace=Error.captureStackTrace;module.exports=function(message){var err=new Error(message),code=arguments[1],ext=arguments[2];return isValue(ext)||isObject(code)&&(ext=code,code=null),isValue(ext)&&assign(err,ext),isValue(code)&&(err.code=code),captureStackTrace&&captureStackTrace(err,module.exports),err}}(custom);var mixin,hasRequiredMixin,hasRequired_defineLength,customExports=custom.exports,_defineLength={exports:{}};function requireMixin(){if(hasRequiredMixin)return mixin;hasRequiredMixin=1;var value=requireValidValue(),defineProperty=Object.defineProperty,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getOwnPropertyNames=Object.getOwnPropertyNames,getOwnPropertySymbols=Object.getOwnPropertySymbols;return mixin=function(target,source){var error,sourceObject=Object(value(source));if(target=Object(value(target)),getOwnPropertyNames(sourceObject).forEach((function(name){try{defineProperty(target,name,getOwnPropertyDescriptor(source,name))}catch(e){error=e}})),"function"==typeof getOwnPropertySymbols&&getOwnPropertySymbols(sourceObject).forEach((function(symbol){try{defineProperty(target,symbol,getOwnPropertyDescriptor(source,symbol))}catch(e){error=e}})),void 0!==error)throw error;return target}}function require_defineLength(){if(hasRequired_defineLength)return _defineLength.exports;hasRequired_defineLength=1;var desc,defineProperty,generate,mixin,cache,toPosInt=requireToPosInteger(),test=function(arg1,arg2){return arg2};try{Object.defineProperty(test,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(ignore){}return 1===test.length?(desc={configurable:!0,writable:!1,enumerable:!1},defineProperty=Object.defineProperty,_defineLength.exports=function(fn,length){return length=toPosInt(length),fn.length===length?fn:(desc.value=length,defineProperty(fn,"length",desc))}):(mixin=requireMixin(),cache=[],generate=function(length){var args,i=0;if(cache[length])return cache[length];for(args=[];length--;)args.push("a"+(++i).toString(36));return new Function("fn","return function ("+args.join(", ")+") { return fn.apply(this, arguments); };")},_defineLength.exports=function(src,length){var target;if(length=toPosInt(length),src.length===length)return src;target=generate(length)(src);try{mixin(target,src)}catch(ignore){}return target}),_defineLength.exports}var eventEmitter={exports:{}};!function(module,exports){var on,once,off,emit,methods,descriptors,base,d=dExports,callable=requireValidCallable(),apply=Function.prototype.apply,call=Function.prototype.call,create=Object.create,defineProperty=Object.defineProperty,defineProperties=Object.defineProperties,hasOwnProperty=Object.prototype.hasOwnProperty,descriptor={configurable:!0,enumerable:!1,writable:!0};once=function(type,listener){var once,self;return callable(listener),self=this,on.call(this,type,once=function(){off.call(self,type,once),apply.call(listener,this,arguments)}),once.__eeOnceListener__=listener,this},emit=function(type){var i,l,listener,listeners,args;if(hasOwnProperty.call(this,"__ee__")&&(listeners=this.__ee__[type]))if("object"==typeof listeners){for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];for(listeners=listeners.slice(),i=0;listener=listeners[i];++i)apply.call(listener,this,args)}else switch(arguments.length){case 1:call.call(listeners,this);break;case 2:call.call(listeners,this,arguments[1]);break;case 3:call.call(listeners,this,arguments[1],arguments[2]);break;default:for(l=arguments.length,args=new Array(l-1),i=1;i<l;++i)args[i-1]=arguments[i];apply.call(listeners,this,args)}},methods={on:on=function(type,listener){var data;return callable(listener),hasOwnProperty.call(this,"__ee__")?data=this.__ee__:(data=descriptor.value=create(null),defineProperty(this,"__ee__",descriptor),descriptor.value=null),data[type]?"object"==typeof data[type]?data[type].push(listener):data[type]=[data[type],listener]:data[type]=listener,this},once:once,off:off=function(type,listener){var data,listeners,candidate,i;if(callable(listener),!hasOwnProperty.call(this,"__ee__"))return this;if(!(data=this.__ee__)[type])return this;if("object"==typeof(listeners=data[type]))for(i=0;candidate=listeners[i];++i)candidate!==listener&&candidate.__eeOnceListener__!==listener||(2===listeners.length?data[type]=listeners[i?0:1]:listeners.splice(i,1));else listeners!==listener&&listeners.__eeOnceListener__!==listener||delete data[type];return this},emit:emit},descriptors={on:d(on),once:d(once),off:d(off),emit:d(emit)},base=defineProperties({},descriptors),module.exports=exports=function(o){return null==o?create(base):defineProperties(Object(o),descriptors)},exports.methods=methods}(eventEmitter,eventEmitter.exports);var isImplemented$5,hasRequiredIsImplemented$4,isImplemented$4,hasRequiredIsImplemented$3,implementation,hasRequiredImplementation,globalThis_1,hasRequiredGlobalThis,isImplemented$3,hasRequiredIsImplemented$2,isSymbol,hasRequiredIsSymbol,validateSymbol,hasRequiredValidateSymbol,generateName,hasRequiredGenerateName,standardSymbols,hasRequiredStandardSymbols,symbolRegistry,hasRequiredSymbolRegistry,polyfill,hasRequiredPolyfill,es6Symbol,hasRequiredEs6Symbol,isArguments,hasRequiredIsArguments,isFunction,hasRequiredIsFunction,isString,hasRequiredIsString,shim$3,hasRequiredShim$3,from$1,hasRequiredFrom,eventEmitterExports=eventEmitter.exports;function requireGlobalThis(){return hasRequiredGlobalThis?globalThis_1:(hasRequiredGlobalThis=1,globalThis_1=(hasRequiredIsImplemented$3?isImplemented$4:(hasRequiredIsImplemented$3=1,isImplemented$4=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}))()?globalThis:function(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var naiveFallback=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};return implementation=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(error){return naiveFallback()}try{return __global__||naiveFallback()}finally{delete Object.prototype.__global__}}()}())}function requireIsSymbol(){return hasRequiredIsSymbol||(hasRequiredIsSymbol=1,isSymbol=function(value){return!!value&&("symbol"==typeof value||!!value.constructor&&("Symbol"===value.constructor.name&&"Symbol"===value[value.constructor.toStringTag]))}),isSymbol}function requireValidateSymbol(){if(hasRequiredValidateSymbol)return validateSymbol;hasRequiredValidateSymbol=1;var isSymbol=requireIsSymbol();return validateSymbol=function(value){if(!isSymbol(value))throw new TypeError(value+" is not a symbol");return value},validateSymbol}function requireGenerateName(){if(hasRequiredGenerateName)return generateName;hasRequiredGenerateName=1;var d=dExports,create=Object.create,defineProperty=Object.defineProperty,objPrototype=Object.prototype,created=create(null);return generateName=function(desc){for(var name,ie11BugWorkaround,postfix=0;created[desc+(postfix||"")];)++postfix;return created[desc+=postfix||""]=!0,defineProperty(objPrototype,name="@@"+desc,d.gs(null,(function(value){ie11BugWorkaround||(ie11BugWorkaround=!0,defineProperty(this,name,d(value)),ie11BugWorkaround=!1)}))),name},generateName}function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var SymbolPolyfill,HiddenSymbol,isNativeSafe,d=dExports,validateSymbol=requireValidateSymbol(),NativeSymbol=requireGlobalThis().Symbol,generateName=requireGenerateName(),setupStandardSymbols=function(){if(hasRequiredStandardSymbols)return standardSymbols;hasRequiredStandardSymbols=1;var d=dExports,NativeSymbol=requireGlobalThis().Symbol;return standardSymbols=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{hasInstance:d("",NativeSymbol&&NativeSymbol.hasInstance||SymbolPolyfill("hasInstance")),isConcatSpreadable:d("",NativeSymbol&&NativeSymbol.isConcatSpreadable||SymbolPolyfill("isConcatSpreadable")),iterator:d("",NativeSymbol&&NativeSymbol.iterator||SymbolPolyfill("iterator")),match:d("",NativeSymbol&&NativeSymbol.match||SymbolPolyfill("match")),replace:d("",NativeSymbol&&NativeSymbol.replace||SymbolPolyfill("replace")),search:d("",NativeSymbol&&NativeSymbol.search||SymbolPolyfill("search")),species:d("",NativeSymbol&&NativeSymbol.species||SymbolPolyfill("species")),split:d("",NativeSymbol&&NativeSymbol.split||SymbolPolyfill("split")),toPrimitive:d("",NativeSymbol&&NativeSymbol.toPrimitive||SymbolPolyfill("toPrimitive")),toStringTag:d("",NativeSymbol&&NativeSymbol.toStringTag||SymbolPolyfill("toStringTag")),unscopables:d("",NativeSymbol&&NativeSymbol.unscopables||SymbolPolyfill("unscopables"))})}}(),setupSymbolRegistry=function(){if(hasRequiredSymbolRegistry)return symbolRegistry;hasRequiredSymbolRegistry=1;var d=dExports,validateSymbol=requireValidateSymbol(),registry=Object.create(null);return symbolRegistry=function(SymbolPolyfill){return Object.defineProperties(SymbolPolyfill,{for:d((function(key){return registry[key]?registry[key]:registry[key]=SymbolPolyfill(String(key))})),keyFor:d((function(symbol){var key;for(key in validateSymbol(symbol),registry)if(registry[key]===symbol)return key}))})}}(),create=Object.create,defineProperties=Object.defineProperties,defineProperty=Object.defineProperty;if("function"==typeof NativeSymbol)try{String(NativeSymbol()),isNativeSafe=!0}catch(ignore){}else NativeSymbol=null;return HiddenSymbol=function(description){if(this instanceof HiddenSymbol)throw new TypeError("Symbol is not a constructor");return SymbolPolyfill(description)},polyfill=SymbolPolyfill=function Symbol(description){var symbol;if(this instanceof Symbol)throw new TypeError("Symbol is not a constructor");return isNativeSafe?NativeSymbol(description):(symbol=create(HiddenSymbol.prototype),description=void 0===description?"":String(description),defineProperties(symbol,{__description__:d("",description),__name__:d("",generateName(description))}))},setupStandardSymbols(SymbolPolyfill),setupSymbolRegistry(SymbolPolyfill),defineProperties(HiddenSymbol.prototype,{constructor:d(SymbolPolyfill),toString:d("",(function(){return this.__name__}))}),defineProperties(SymbolPolyfill.prototype,{toString:d((function(){return"Symbol ("+validateSymbol(this).__description__+")"})),valueOf:d((function(){return validateSymbol(this)}))}),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toPrimitive,d("",(function(){var symbol=validateSymbol(this);return"symbol"==typeof symbol?symbol:symbol.toString()}))),defineProperty(SymbolPolyfill.prototype,SymbolPolyfill.toStringTag,d("c","Symbol")),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toStringTag,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toStringTag])),defineProperty(HiddenSymbol.prototype,SymbolPolyfill.toPrimitive,d("c",SymbolPolyfill.prototype[SymbolPolyfill.toPrimitive])),polyfill}function requireEs6Symbol(){return hasRequiredEs6Symbol?es6Symbol:(hasRequiredEs6Symbol=1,es6Symbol=function(){if(hasRequiredIsImplemented$2)return isImplemented$3;hasRequiredIsImplemented$2=1;var global=requireGlobalThis(),validTypes={object:!0,symbol:!0};return isImplemented$3=function(){var symbol,Symbol=global.Symbol;if("function"!=typeof Symbol)return!1;symbol=Symbol("test symbol");try{String(symbol)}catch(e){return!1}return!!validTypes[typeof Symbol.iterator]&&!!validTypes[typeof Symbol.toPrimitive]&&!!validTypes[typeof Symbol.toStringTag]}}()()?requireGlobalThis().Symbol:requirePolyfill())}function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var objToString=Object.prototype.toString,id=objToString.call(function(){return arguments}());return isArguments=function(value){return objToString.call(value)===id},isArguments}function requireIsFunction(){if(hasRequiredIsFunction)return isFunction;hasRequiredIsFunction=1;var objToString=Object.prototype.toString,isFunctionStringTag=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);return isFunction=function(value){return"function"==typeof value&&isFunctionStringTag(objToString.call(value))},isFunction}function requireIsString(){if(hasRequiredIsString)return isString;hasRequiredIsString=1;var objToString=Object.prototype.toString,id=objToString.call("");return isString=function(value){return"string"==typeof value||value&&"object"==typeof value&&(value instanceof String||objToString.call(value)===id)||!1},isString}function requireFrom(){return hasRequiredFrom||(hasRequiredFrom=1,from$1=(hasRequiredIsImplemented$4||(hasRequiredIsImplemented$4=1,isImplemented$5=function(){var arr,result,from=Array.from;return"function"==typeof from&&(result=from(arr=["raz","dwa"]),Boolean(result&&result!==arr&&"dwa"===result[1]))}),isImplemented$5)()?Array.from:function(){if(hasRequiredShim$3)return shim$3;hasRequiredShim$3=1;var iteratorSymbol=requireEs6Symbol().iterator,isArguments=requireIsArguments(),isFunction=requireIsFunction(),toPosInt=requireToPosInteger(),callable=requireValidCallable(),validValue=requireValidValue(),isValue=requireIsValue(),isString=requireIsString(),isArray=Array.isArray,call=Function.prototype.call,desc={configurable:!0,enumerable:!0,writable:!0,value:null},defineProperty=Object.defineProperty;return shim$3=function(arrayLike){var Context,i,j,arr,length,code,iterator,result,getIterator,value,mapFn=arguments[1],thisArg=arguments[2];if(arrayLike=Object(validValue(arrayLike)),isValue(mapFn)&&callable(mapFn),this&&this!==Array&&isFunction(this))Context=this;else{if(!mapFn){if(isArguments(arrayLike))return 1!==(length=arrayLike.length)?Array.apply(null,arrayLike):((arr=new Array(1))[0]=arrayLike[0],arr);if(isArray(arrayLike)){for(arr=new Array(length=arrayLike.length),i=0;i<length;++i)arr[i]=arrayLike[i];return arr}}arr=[]}if(!isArray(arrayLike))if(void 0!==(getIterator=arrayLike[iteratorSymbol])){for(iterator=callable(getIterator).call(arrayLike),Context&&(arr=new Context),result=iterator.next(),i=0;!result.done;)value=mapFn?call.call(mapFn,thisArg,result.value,i):result.value,Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value,result=iterator.next(),++i;length=i}else if(isString(arrayLike)){for(length=arrayLike.length,Context&&(arr=new Context),i=0,j=0;i<length;++i)value=arrayLike[i],i+1<length&&(code=value.charCodeAt(0))>=55296&&code<=56319&&(value+=arrayLike[++i]),value=mapFn?call.call(mapFn,thisArg,value,j):value,Context?(desc.value=value,defineProperty(arr,j,desc)):arr[j]=value,++j;length=j}if(void 0===length)for(length=toPosInt(arrayLike.length),Context&&(arr=new Context(length)),i=0;i<length;++i)value=mapFn?call.call(mapFn,thisArg,arrayLike[i],i):arrayLike[i],Context?(desc.value=value,defineProperty(arr,i,desc)):arr[i]=value;return Context&&(desc.value=null,arr.length=length),arr},shim$3}()),from$1}var resolveArgs,from=requireFrom(),isArray=Array.isArray,toArray=function(arrayLike){return isArray(arrayLike)?arrayLike:from(arrayLike)},isValue$3=requireIsValue(),callable$4=requireValidCallable(),slice$1=Array.prototype.slice;resolveArgs=function(args){return this.map((function(resolve,i){return resolve?resolve(args[i]):args[i]})).concat(slice$1.call(args,this.length))};var primitive,hasRequiredPrimitive,getPrimitiveFixed,hasRequiredGetPrimitiveFixed,callable$3=requireValidCallable(),customError=customExports,defineLength=require_defineLength(),d$2=dExports,ee=eventEmitterExports.methods,resolveResolve=function(resolvers){return(resolvers=toArray(resolvers)).forEach((function(resolve){isValue$3(resolve)&&callable$4(resolve)})),resolveArgs.bind(resolvers)},resolveNormalize=function(userNormalizer){var normalizer;return"function"==typeof userNormalizer?{set:userNormalizer,get:userNormalizer}:(normalizer={get:callable$3(userNormalizer.get)},void 0!==userNormalizer.set?(normalizer.set=callable$3(userNormalizer.set),userNormalizer.delete&&(normalizer.delete=callable$3(userNormalizer.delete)),userNormalizer.clear&&(normalizer.clear=callable$3(userNormalizer.clear)),normalizer):(normalizer.set=normalizer.get,normalizer))},apply=Function.prototype.apply,call$2=Function.prototype.call,create=Object.create,defineProperties=Object.defineProperties,on=ee.on,emit=ee.emit,callable$2=requireValidCallable(),forEach$2=forEach$5,extensions$1=registeredExtensions,configure=function(original,length,options){var conf,memLength,get,set,del,clear,extDel,extGet,extHas,normalizer,getListeners,setListeners,deleteListeners,memoized,resolve,cache=create(null);return memLength=!1!==length?length:isNaN(original.length)?1:original.length,options.normalizer&&(normalizer=resolveNormalize(options.normalizer),get=normalizer.get,set=normalizer.set,del=normalizer.delete,clear=normalizer.clear),null!=options.resolvers&&(resolve=resolveResolve(options.resolvers)),memoized=get?defineLength((function(arg){var id,result,args=arguments;if(resolve&&(args=resolve(args)),null!==(id=get(args))&&hasOwnProperty.call(cache,id))return getListeners&&conf.emit("get",id,args,this),cache[id];if(result=1===args.length?call$2.call(original,this,args[0]):apply.call(original,this,args),null===id){if(null!==(id=get(args)))throw customError("Circular invocation","CIRCULAR_INVOCATION");id=set(args)}else if(hasOwnProperty.call(cache,id))throw customError("Circular invocation","CIRCULAR_INVOCATION");return cache[id]=result,setListeners&&conf.emit("set",id,null,result),result}),memLength):0===length?function(){var result;if(hasOwnProperty.call(cache,"data"))return getListeners&&conf.emit("get","data",arguments,this),cache.data;if(result=arguments.length?apply.call(original,this,arguments):call$2.call(original,this),hasOwnProperty.call(cache,"data"))throw customError("Circular invocation","CIRCULAR_INVOCATION");return cache.data=result,setListeners&&conf.emit("set","data",null,result),result}:function(arg){var result,id,args=arguments;if(resolve&&(args=resolve(arguments)),id=String(args[0]),hasOwnProperty.call(cache,id))return getListeners&&conf.emit("get",id,args,this),cache[id];if(result=1===args.length?call$2.call(original,this,args[0]):apply.call(original,this,args),hasOwnProperty.call(cache,id))throw customError("Circular invocation","CIRCULAR_INVOCATION");return cache[id]=result,setListeners&&conf.emit("set",id,null,result),result},conf={original:original,memoized:memoized,profileName:options.profileName,get:function(args){return resolve&&(args=resolve(args)),get?get(args):String(args[0])},has:function(id){return hasOwnProperty.call(cache,id)},delete:function(id){var result;hasOwnProperty.call(cache,id)&&(del&&del(id),result=cache[id],delete cache[id],deleteListeners&&conf.emit("delete",id,result))},clear:function(){var oldCache=cache;clear&&clear(),cache=create(null),conf.emit("clear",oldCache)},on:function(type,listener){return"get"===type?getListeners=!0:"set"===type?setListeners=!0:"delete"===type&&(deleteListeners=!0),on.call(this,type,listener)},emit:emit,updateEnv:function(){original=conf.original}},extDel=get?defineLength((function(arg){var id,args=arguments;resolve&&(args=resolve(args)),null!==(id=get(args))&&conf.delete(id)}),memLength):0===length?function(){return conf.delete("data")}:function(arg){return resolve&&(arg=resolve(arguments)[0]),conf.delete(arg)},extGet=defineLength((function(){var id,args=arguments;return 0===length?cache.data:(resolve&&(args=resolve(args)),id=get?get(args):String(args[0]),cache[id])})),extHas=defineLength((function(){var id,args=arguments;return 0===length?conf.has("data"):(resolve&&(args=resolve(args)),null!==(id=get?get(args):String(args[0]))&&conf.has(id))})),defineProperties(memoized,{__memoized__:d$2(!0),delete:d$2(extDel),clear:d$2(conf.clear),_get:d$2(extGet),_has:d$2(extHas)}),conf},resolveLength$2=resolveLength$3;var shim$2,hasRequiredShim$2;var get$1,hasRequiredGet$1,get1,hasRequiredGet1,getFixed,hasRequiredGetFixed,isNan=function(){var numberIsNaN=Number.isNaN;return"function"==typeof numberIsNaN&&(!numberIsNaN({})&&numberIsNaN(NaN)&&!numberIsNaN(34))}()?Number.isNaN:(hasRequiredShim$2||(hasRequiredShim$2=1,shim$2=function(value){return value!=value}),shim$2),numberIsNaN=isNan,toPosInt$1=requireToPosInteger(),value$2=requireValidValue(),indexOf$1=Array.prototype.indexOf,objHasOwnProperty$1=Object.prototype.hasOwnProperty,abs=Math.abs,floor=Math.floor,eIndexOf=function(searchElement){var i,length,fromIndex,val;if(!numberIsNaN(searchElement))return indexOf$1.apply(this,arguments);for(length=toPosInt$1(value$2(this).length),fromIndex=arguments[1],i=fromIndex=isNaN(fromIndex)?0:fromIndex>=0?floor(fromIndex):toPosInt$1(this.length)-floor(abs(fromIndex));i<length;++i)if(objHasOwnProperty$1.call(this,i)&&(val=this[i],numberIsNaN(val)))return i;return-1};var nextTick,hasRequiredNextTick,hasRequiredAsync,async={};function requireNextTick(){if(hasRequiredNextTick)return nextTick;hasRequiredNextTick=1;var ensureCallable=function(fn){if("function"!=typeof fn)throw new TypeError(fn+" is not a function");return fn},byObserver=function(Observer){var queue,currentQueue,node=document.createTextNode(""),i=0;return new Observer((function(){var callback;if(queue)currentQueue&&(queue=currentQueue.concat(queue));else{if(!currentQueue)return;queue=currentQueue}if(currentQueue=queue,queue=null,"function"==typeof currentQueue)return callback=currentQueue,currentQueue=null,void callback();for(node.data=i=++i%2;currentQueue;)callback=currentQueue.shift(),currentQueue.length||(currentQueue=null),callback()})).observe(node,{characterData:!0}),function(fn){ensureCallable(fn),queue?"function"==typeof queue?queue=[queue,fn]:queue.push(fn):(queue=fn,node.data=i=++i%2)}};return nextTick=function(){if("object"==typeof process&&process&&"function"==typeof process.nextTick)return process.nextTick;if("function"==typeof queueMicrotask)return function(cb){queueMicrotask(ensureCallable(cb))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return byObserver(MutationObserver);if("function"==typeof WebKitMutationObserver)return byObserver(WebKitMutationObserver)}return"function"==typeof setImmediate?function(cb){setImmediate(ensureCallable(cb))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(cb){setTimeout(ensureCallable(cb),0)}:null}()}var isCallable,hasRequiredIsCallable,validateStringifiable,hasRequiredValidateStringifiable,validateStringifiableValue,hasRequiredValidateStringifiableValue,safeToString$2,hasRequiredSafeToString,toShortStringRepresentation,hasRequiredToShortStringRepresentation,promise={};function requireIsCallable(){return hasRequiredIsCallable?isCallable:(hasRequiredIsCallable=1,isCallable=function(obj){return"function"==typeof obj})}function requireValidateStringifiable(){if(hasRequiredValidateStringifiable)return validateStringifiable;hasRequiredValidateStringifiable=1;var isCallable=requireIsCallable();return validateStringifiable=function(stringifiable){try{return stringifiable&&isCallable(stringifiable.toString)?stringifiable.toString():String(stringifiable)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}}function requireValidateStringifiableValue(){if(hasRequiredValidateStringifiableValue)return validateStringifiableValue;hasRequiredValidateStringifiableValue=1;var ensureValue=requireValidValue(),stringifiable=requireValidateStringifiable();return validateStringifiableValue=function(value){return stringifiable(ensureValue(value))},validateStringifiableValue}function requireToShortStringRepresentation(){if(hasRequiredToShortStringRepresentation)return toShortStringRepresentation;hasRequiredToShortStringRepresentation=1;var safeToString=function(){if(hasRequiredSafeToString)return safeToString$2;hasRequiredSafeToString=1;var isCallable=requireIsCallable();return safeToString$2=function(value){try{return value&&isCallable(value.toString)?value.toString():String(value)}catch(e){return"<Non-coercible to string value>"}},safeToString$2}(),reNewLine=/[\n\r\u2028\u2029]/g;return toShortStringRepresentation=function(value){var string=safeToString(value);return string.length>100&&(string=string.slice(0,99)+"…"),string=string.replace(reNewLine,(function(char){return JSON.stringify(char).slice(1,-1)}))},toShortStringRepresentation}var hasRequiredIsPromise,hasRequiredPromise,isPromise={exports:{}};function requireIsPromise(){if(hasRequiredIsPromise)return isPromise.exports;function isPromise$1(obj){return!!obj&&("object"==typeof obj||"function"==typeof obj)&&"function"==typeof obj.then}return hasRequiredIsPromise=1,isPromise.exports=isPromise$1,isPromise.exports.default=isPromise$1,isPromise.exports}var hasRequiredDispose,dispose={};var maxTimeout,hasRequiredMaxTimeout,validTimeout,hasRequiredValidTimeout,hasRequiredMaxAge,maxAge={};function requireMaxTimeout(){return hasRequiredMaxTimeout?maxTimeout:(hasRequiredMaxTimeout=1,maxTimeout=2147483647)}function requireValidTimeout(){if(hasRequiredValidTimeout)return validTimeout;hasRequiredValidTimeout=1;var toPosInt=requireToPosInteger(),maxTimeout=requireMaxTimeout();return validTimeout=function(value){if((value=toPosInt(value))>maxTimeout)throw new TypeError(value+" exceeds maximum possible timeout");return value},validTimeout}var lruQueue,hasRequiredLruQueue,hasRequiredMax,max$1={};function requireLruQueue(){if(hasRequiredLruQueue)return lruQueue;hasRequiredLruQueue=1;var toPosInt=requireToPosInteger(),create=Object.create,hasOwnProperty=Object.prototype.hasOwnProperty;return lruQueue=function(limit){var del,size=0,base=1,queue=create(null),map=create(null),index=0;return limit=toPosInt(limit),{hit:function(id){var oldIndex=map[id],nuIndex=++index;if(queue[nuIndex]=id,map[id]=nuIndex,!oldIndex){if(++size<=limit)return;return id=queue[base],del(id),id}if(delete queue[oldIndex],base===oldIndex)for(;!hasOwnProperty.call(queue,++base);)continue},delete:del=function(id){var oldIndex=map[id];if(oldIndex&&(delete queue[oldIndex],delete map[id],--size,base===oldIndex)){if(!size)return index=0,void(base=1);for(;!hasOwnProperty.call(queue,++base);)continue}},clear:function(){size=0,base=1,queue=create(null),map=create(null),index=0}}},lruQueue}var hasRequiredRefCounter,refCounter={};var define,normalizeOpts$1=normalizeOptions,resolveLength$1=resolveLength$3,plain=function self(fn){var options,length,conf;if(callable$2(fn),(options=Object(arguments[1])).async&&options.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(fn,"__memoized__")&&!options.force?fn:(length=resolveLength$2(options.length,fn.length,options.async&&extensions$1.async),conf=configure(fn,length,options),forEach$2(extensions$1,(function(extFn,name){options[name]&&extFn(options[name],conf,options)})),self.__profiler__&&self.__profiler__(conf),conf.updateEnv(),conf.memoized)},memoizee=function(fn){var length,options=normalizeOpts$1(arguments[1]);return options.normalizer||0!==(length=options.length=resolveLength$1(options.length,fn.length,options.async))&&(options.primitive?!1===length?options.normalizer=hasRequiredPrimitive?primitive:(hasRequiredPrimitive=1,primitive=function(args){var id,i,length=args.length;if(!length)return"";for(id=String(args[i=0]);--length;)id+=""+args[++i];return id}):length>1&&(options.normalizer=(hasRequiredGetPrimitiveFixed?getPrimitiveFixed:(hasRequiredGetPrimitiveFixed=1,getPrimitiveFixed=function(length){return length?function(args){for(var id=String(args[0]),i=0,currentLength=length;--currentLength;)id+=""+args[++i];return id}:function(){return""}}))(length)):options.normalizer=!1===length?function(){if(hasRequiredGet$1)return get$1;hasRequiredGet$1=1;var indexOf=eIndexOf,create=Object.create;return get$1=function(){var lastId=0,map=[],cache=create(null);return{get:function(args){var i,index=0,set=map,length=args.length;if(0===length)return set[length]||null;if(set=set[length]){for(;index<length-1;){if(-1===(i=indexOf.call(set[0],args[index])))return null;set=set[1][i],++index}return-1===(i=indexOf.call(set[0],args[index]))?null:set[1][i]||null}return null},set:function(args){var i,index=0,set=map,length=args.length;if(0===length)set[length]=++lastId;else{for(set[length]||(set[length]=[[],[]]),set=set[length];index<length-1;)-1===(i=indexOf.call(set[0],args[index]))&&(i=set[0].push(args[index])-1,set[1].push([[],[]])),set=set[1][i],++index;-1===(i=indexOf.call(set[0],args[index]))&&(i=set[0].push(args[index])-1),set[1][i]=++lastId}return cache[lastId]=args,lastId},delete:function(id){var i,index=0,set=map,args=cache[id],length=args.length,path=[];if(0===length)delete set[length];else if(set=set[length]){for(;index<length-1;){if(-1===(i=indexOf.call(set[0],args[index])))return;path.push(set,i),set=set[1][i],++index}if(-1===(i=indexOf.call(set[0],args[index])))return;for(id=set[1][i],set[0].splice(i,1),set[1].splice(i,1);!set[0].length&&path.length;)i=path.pop(),(set=path.pop())[0].splice(i,1),set[1].splice(i,1)}delete cache[id]},clear:function(){map=[],cache=create(null)}}},get$1}()():1===length?function(){if(hasRequiredGet1)return get1;hasRequiredGet1=1;var indexOf=eIndexOf;return get1=function(){var lastId=0,argsMap=[],cache=[];return{get:function(args){var index=indexOf.call(argsMap,args[0]);return-1===index?null:cache[index]},set:function(args){return argsMap.push(args[0]),cache.push(++lastId),lastId},delete:function(id){var index=indexOf.call(cache,id);-1!==index&&(argsMap.splice(index,1),cache.splice(index,1))},clear:function(){argsMap=[],cache=[]}}}}()():function(){if(hasRequiredGetFixed)return getFixed;hasRequiredGetFixed=1;var indexOf=eIndexOf,create=Object.create;return getFixed=function(length){var lastId=0,map=[[],[]],cache=create(null);return{get:function(args){for(var i,index=0,set=map;index<length-1;){if(-1===(i=indexOf.call(set[0],args[index])))return null;set=set[1][i],++index}return-1===(i=indexOf.call(set[0],args[index]))?null:set[1][i]||null},set:function(args){for(var i,index=0,set=map;index<length-1;)-1===(i=indexOf.call(set[0],args[index]))&&(i=set[0].push(args[index])-1,set[1].push([[],[]])),set=set[1][i],++index;return-1===(i=indexOf.call(set[0],args[index]))&&(i=set[0].push(args[index])-1),set[1][i]=++lastId,cache[lastId]=args,lastId},delete:function(id){for(var i,index=0,set=map,path=[],args=cache[id];index<length-1;){if(-1===(i=indexOf.call(set[0],args[index])))return;path.push(set,i),set=set[1][i],++index}if(-1!==(i=indexOf.call(set[0],args[index]))){for(id=set[1][i],set[0].splice(i,1),set[1].splice(i,1);!set[0].length&&path.length;)i=path.pop(),(set=path.pop())[0].splice(i,1),set[1].splice(i,1);delete cache[id]}},clear:function(){map=[[],[]],cache=create(null)}}},getFixed}()(length)),options.async&&function(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var aFrom=requireFrom(),objectMap=map$2,mixin=requireMixin(),defineLength=require_defineLength(),nextTick=requireNextTick(),slice=Array.prototype.slice,apply=Function.prototype.apply,create=Object.create;registeredExtensions.async=function(tbi,conf){var currentCallback,currentContext,currentArgs,waiting=create(null),cache=create(null),base=conf.memoized,original=conf.original;conf.memoized=defineLength((function(arg){var args=arguments,last=args[args.length-1];return"function"==typeof last&&(currentCallback=last,args=slice.call(args,0,-1)),base.apply(currentContext=this,currentArgs=args)}),base);try{mixin(conf.memoized,base)}catch(ignore){}conf.on("get",(function(id){var cb,context,args;if(currentCallback){if(waiting[id])return"function"==typeof waiting[id]?waiting[id]=[waiting[id],currentCallback]:waiting[id].push(currentCallback),void(currentCallback=null);cb=currentCallback,context=currentContext,args=currentArgs,currentCallback=currentContext=currentArgs=null,nextTick((function(){var data;hasOwnProperty.call(cache,id)?(data=cache[id],conf.emit("getasync",id,args,context),apply.call(cb,data.context,data.args)):(currentCallback=cb,currentContext=context,currentArgs=args,base.apply(context,args))}))}})),conf.original=function(){var args,cb,origCb,result;return currentCallback?(args=aFrom(arguments),cb=function self(err){var cb,args,id=self.id;if(null!=id){if(delete self.id,cb=waiting[id],delete waiting[id],cb)return args=aFrom(arguments),conf.has(id)&&(err?conf.delete(id):(cache[id]={context:this,args:args},conf.emit("setasync",id,"function"==typeof cb?1:cb.length))),"function"==typeof cb?result=apply.call(cb,this,args):cb.forEach((function(cb){result=apply.call(cb,this,args)}),this),result}else nextTick(apply.bind(self,this,arguments))},origCb=currentCallback,currentCallback=currentContext=currentArgs=null,args.push(cb),result=apply.call(original,this,args),cb.cb=origCb,currentCallback=cb,result):apply.call(original,this,arguments)},conf.on("set",(function(id){currentCallback?(waiting[id]?"function"==typeof waiting[id]?waiting[id]=[waiting[id],currentCallback.cb]:waiting[id].push(currentCallback.cb):waiting[id]=currentCallback.cb,delete currentCallback.cb,currentCallback.id=id,currentCallback=null):conf.delete(id)})),conf.on("delete",(function(id){var result;hasOwnProperty.call(waiting,id)||cache[id]&&(result=cache[id],delete cache[id],conf.emit("deleteasync",id,slice.call(result.args,1)))})),conf.on("clear",(function(){var oldCache=cache;cache=create(null),conf.emit("clearasync",objectMap(oldCache,(function(data){return slice.call(data.args,1)})))}))}}(),options.promise&&function(){if(hasRequiredPromise)return promise;hasRequiredPromise=1;var objectMap=map$2,primitiveSet=primitiveSet$1,ensureString=requireValidateStringifiableValue(),toShortString=requireToShortStringRepresentation(),isPromise=requireIsPromise(),nextTick=requireNextTick(),create=Object.create,supportedModes=primitiveSet("then","then:finally","done","done:finally");registeredExtensions.promise=function(mode,conf){var waiting=create(null),cache=create(null),promises=create(null);if(!0===mode)mode=null;else if(mode=ensureString(mode),!supportedModes[mode])throw new TypeError("'"+toShortString(mode)+"' is not valid promise mode");conf.on("set",(function(id,ignore,promise){var isFailed=!1;if(!isPromise(promise))return cache[id]=promise,void conf.emit("setasync",id,1);waiting[id]=1,promises[id]=promise;var onSuccess=function(result){var count=waiting[id];if(isFailed)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");count&&(delete waiting[id],cache[id]=result,conf.emit("setasync",id,count))},onFailure=function(){isFailed=!0,waiting[id]&&(delete waiting[id],delete promises[id],conf.delete(id))},resolvedMode=mode;if(resolvedMode||(resolvedMode="then"),"then"===resolvedMode){var nextTickFailure=function(){nextTick(onFailure)};"function"==typeof(promise=promise.then((function(result){nextTick(onSuccess.bind(this,result))}),nextTickFailure)).finally&&promise.finally(nextTickFailure)}else if("done"===resolvedMode){if("function"!=typeof promise.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");promise.done(onSuccess,onFailure)}else if("done:finally"===resolvedMode){if("function"!=typeof promise.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof promise.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");promise.done(onSuccess),promise.finally(onFailure)}})),conf.on("get",(function(id,args,context){var promise;if(waiting[id])++waiting[id];else{promise=promises[id];var emit=function(){conf.emit("getasync",id,args,context)};isPromise(promise)?"function"==typeof promise.done?promise.done(emit):promise.then((function(){nextTick(emit)})):emit()}})),conf.on("delete",(function(id){if(delete promises[id],waiting[id])delete waiting[id];else if(hasOwnProperty.call(cache,id)){var result=cache[id];delete cache[id],conf.emit("deleteasync",id,[result])}})),conf.on("clear",(function(){var oldCache=cache;cache=create(null),waiting=create(null),promises=create(null),conf.emit("clearasync",objectMap(oldCache,(function(data){return[data]})))}))}}(),options.dispose&&function(){if(hasRequiredDispose)return dispose;hasRequiredDispose=1;var callable=requireValidCallable(),forEach=forEach$5,extensions=registeredExtensions,apply=Function.prototype.apply;extensions.dispose=function(dispose,conf,options){var del;if(callable(dispose),options.async&&extensions.async||options.promise&&extensions.promise)return conf.on("deleteasync",del=function(id,resultArray){apply.call(dispose,null,resultArray)}),void conf.on("clearasync",(function(cache){forEach(cache,(function(result,id){del(id,result)}))}));conf.on("delete",del=function(id,result){dispose(result)}),conf.on("clear",(function(cache){forEach(cache,(function(result,id){del(id,result)}))}))}}(),options.maxAge&&function(){if(hasRequiredMaxAge)return maxAge;hasRequiredMaxAge=1;var aFrom=requireFrom(),forEach=forEach$5,nextTick=requireNextTick(),isPromise=requireIsPromise(),timeout=requireValidTimeout(),extensions=registeredExtensions,noop=Function.prototype,max=Math.max,min=Math.min,create=Object.create;extensions.maxAge=function(maxAge,conf,options){var timeouts,postfix,preFetchAge,preFetchTimeouts;(maxAge=timeout(maxAge))&&(timeouts=create(null),postfix=options.async&&extensions.async||options.promise&&extensions.promise?"async":"",conf.on("set"+postfix,(function(id){timeouts[id]=setTimeout((function(){conf.delete(id)}),maxAge),"function"==typeof timeouts[id].unref&&timeouts[id].unref(),preFetchTimeouts&&(preFetchTimeouts[id]&&"nextTick"!==preFetchTimeouts[id]&&clearTimeout(preFetchTimeouts[id]),preFetchTimeouts[id]=setTimeout((function(){delete preFetchTimeouts[id]}),preFetchAge),"function"==typeof preFetchTimeouts[id].unref&&preFetchTimeouts[id].unref())})),conf.on("delete"+postfix,(function(id){clearTimeout(timeouts[id]),delete timeouts[id],preFetchTimeouts&&("nextTick"!==preFetchTimeouts[id]&&clearTimeout(preFetchTimeouts[id]),delete preFetchTimeouts[id])})),options.preFetch&&(preFetchAge=!0===options.preFetch||isNaN(options.preFetch)?.333:max(min(Number(options.preFetch),1),0))&&(preFetchTimeouts={},preFetchAge=(1-preFetchAge)*maxAge,conf.on("get"+postfix,(function(id,args,context){preFetchTimeouts[id]||(preFetchTimeouts[id]="nextTick",nextTick((function(){var result;"nextTick"===preFetchTimeouts[id]&&(delete preFetchTimeouts[id],conf.delete(id),options.async&&(args=aFrom(args)).push(noop),result=conf.memoized.apply(context,args),options.promise&&isPromise(result)&&("function"==typeof result.done?result.done(noop,noop):result.then(noop,noop)))})))}))),conf.on("clear"+postfix,(function(){forEach(timeouts,(function(id){clearTimeout(id)})),timeouts={},preFetchTimeouts&&(forEach(preFetchTimeouts,(function(id){"nextTick"!==id&&clearTimeout(id)})),preFetchTimeouts={})})))}}(),options.max&&function(){if(hasRequiredMax)return max$1;hasRequiredMax=1;var toPosInteger=requireToPosInteger(),lruQueue=requireLruQueue(),extensions=registeredExtensions;extensions.max=function(max,conf,options){var postfix,queue,hit;(max=toPosInteger(max))&&(queue=lruQueue(max),postfix=options.async&&extensions.async||options.promise&&extensions.promise?"async":"",conf.on("set"+postfix,hit=function(id){void 0!==(id=queue.hit(id))&&conf.delete(id)}),conf.on("get"+postfix,hit),conf.on("delete"+postfix,queue.delete),conf.on("clear"+postfix,queue.clear))}}(),options.refCounter&&function(){if(hasRequiredRefCounter)return refCounter;hasRequiredRefCounter=1;var d=dExports,extensions=registeredExtensions,create=Object.create,defineProperties=Object.defineProperties;extensions.refCounter=function(ignore,conf,options){var cache,postfix;cache=create(null),postfix=options.async&&extensions.async||options.promise&&extensions.promise?"async":"",conf.on("set"+postfix,(function(id,length){cache[id]=length||1})),conf.on("get"+postfix,(function(id){++cache[id]})),conf.on("delete"+postfix,(function(id){delete cache[id]})),conf.on("clear"+postfix,(function(){cache={}})),defineProperties(conf.memoized,{deleteRef:d((function(){var id=conf.get(arguments);return null===id?null:cache[id]?! --cache[id]&&(conf.delete(id),!0):null})),getRefCount:d((function(){var id=conf.get(arguments);return null===id?0:cache[id]?cache[id]:0}))})}}(),plain(fn,options)},isValue$2=is$6,isObject=is$5,objectToString=Object.prototype.toString,safeToString=function(value){try{return value.toString()}catch(error){try{return String(value)}catch(error2){return null}}},reNewLine=/[\n\r\u2028\u2029]/g,stringCoerce=function(value){if(!isValue$2(value))return null;if(isObject(value)){var valueToString=value.toString;if("function"!=typeof valueToString)return null;if(valueToString===objectToString)return null}try{return""+value}catch(error){return null}},toShortString=function(value){var string=safeToString(value);return null===string?"<Non-coercible to string value>":(string.length>100&&(string=string.slice(0,99)+"…"),string=string.replace(reNewLine,(function(char){switch(char){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}})))},isValue$1=is$6,resolveErrorMessage=function(errorMessage,value,inputOptions){inputOptions&&inputOptions.errorMessage&&(errorMessage=stringCoerce(inputOptions.errorMessage));var valueInsertIndex=errorMessage.indexOf("%v"),valueToken=valueInsertIndex>-1?toShortString(value):null;if(inputOptions&&inputOptions.name){var firstToken,secondToken,firstInsertIndex,secondInsertIndex,nameInsertIndex=errorMessage.indexOf("%n");if(nameInsertIndex>-1)return valueInsertIndex>-1?(nameInsertIndex>valueInsertIndex?(firstToken=valueToken,firstInsertIndex=valueInsertIndex,secondToken=inputOptions.name,secondInsertIndex=nameInsertIndex):(firstToken=inputOptions.name,firstInsertIndex=nameInsertIndex,secondToken=valueToken,secondInsertIndex=valueInsertIndex),errorMessage.slice(0,firstInsertIndex)+firstToken+errorMessage.slice(firstInsertIndex+2,secondInsertIndex)+secondToken+errorMessage.slice(secondInsertIndex+2)):errorMessage.slice(0,nameInsertIndex)+inputOptions.name+errorMessage.slice(nameInsertIndex+2)}return valueInsertIndex>-1?errorMessage.slice(0,valueInsertIndex)+valueToken+errorMessage.slice(valueInsertIndex+2):errorMessage},resolveException$1=function(value,defaultMessage,inputOptions){if(inputOptions&&!isValue$1(value)){if("default"in inputOptions)return inputOptions.default;if(inputOptions.isOptional)return null}var error=new(inputOptions&&inputOptions.Error||TypeError)(resolveErrorMessage(defaultMessage,value,inputOptions));throw inputOptions&&inputOptions.errorCode&&(error.code=inputOptions.errorCode),error},resolveException=resolveException$1,is$1=is$6,ensure$1=function(value){if(is$1(value))return value;var options=arguments[1],errorMessage=options&&options.name?"Expected a value for %n, received %v":"Cannot use %v";return resolveException(value,errorMessage,options)},isPlainFunction=is$2,ensureValue=ensure$1,isValue=is$6,map$1=map$2,contains=contains$2,call$1=Function.prototype.call,defineProperty$1=Object.defineProperty,getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,getPrototypeOf=Object.getPrototypeOf,hasOwnProperty$1=Object.prototype.hasOwnProperty,cacheDesc={configurable:!1,enumerable:!1,writable:!1,value:null};define=function(name,options){var value,dgs,cacheName,desc,resolvable,flat,writable=!1;return options=Object(ensureValue(options)),cacheName=options.cacheName,flat=options.flat,isValue(cacheName)||(cacheName=name),delete options.cacheName,value=options.value,resolvable=isPlainFunction(value),delete options.value,(dgs={configurable:Boolean(options.configurable),enumerable:Boolean(options.enumerable)}).get=name!==cacheName?function(){return hasOwnProperty$1.call(this,cacheName)||(cacheDesc.value=resolvable?call$1.call(value,this,options):value,cacheDesc.writable=writable,defineProperty$1(this,cacheName,cacheDesc),cacheDesc.value=null,desc&&defineProperty$1(this,name,desc)),this[cacheName]}:flat?function self(){var ownDesc,base=this;if(hasOwnProperty$1.call(this,name)){if((ownDesc=getOwnPropertyDescriptor(this,name)).hasOwnProperty("value"))return ownDesc.value;if("function"==typeof ownDesc.get&&ownDesc.get!==self)return ownDesc.get.call(this)}for(;!hasOwnProperty$1.call(base,name);)base=getPrototypeOf(base);return desc.value=resolvable?call$1.call(value,base,options):value,defineProperty$1(base,name,desc),desc.value=null,base[name]}:function self(){var ownDesc;return hasOwnProperty$1.call(this,name)&&(ownDesc=getOwnPropertyDescriptor(this,name))?ownDesc.hasOwnProperty("value")?ownDesc.value:"function"==typeof ownDesc.get&&ownDesc.get!==self?ownDesc.get.call(this):value:(desc.value=resolvable?call$1.call(value,this,options):value,defineProperty$1(this,name,desc),desc.value=null,this[name])},dgs.set=function(value){if(hasOwnProperty$1.call(this,name))throw new TypeError("Cannot assign to lazy defined '"+name+"' property of "+this);dgs.get.call(this),this[cacheName]=value},options.desc?(desc={configurable:contains.call(options.desc,"c"),enumerable:contains.call(options.desc,"e")},cacheName===name?(desc.writable=contains.call(options.desc,"w"),desc.value=null):(writable=contains.call(options.desc,"w"),desc.get=dgs.get,desc.set=dgs.set),delete options.desc):cacheName===name&&(desc={configurable:Boolean(options.configurable),enumerable:Boolean(options.enumerable),writable:Boolean(options.writable),value:null}),delete options.configurable,delete options.enumerable,delete options.writable,dgs};var isFirst,forEach$1=forEach$5,normalizeOpts=normalizeOptions,callable$1=requireValidCallable(),lazy=function(props){return map$1(props,(function(desc,name){return define(name,desc)}))},resolveLength=resolveLength$3,extensions=registeredExtensions,methods=function(memoize){return function(props){return forEach$1(props,(function(desc){var length,fn=callable$1(desc.value);desc.value=function(options){return options.getNormalizer&&(options=normalizeOpts(options),void 0===length&&(length=resolveLength(options.length,fn.length,options.async&&extensions.async)),options.normalizer=options.getNormalizer(length),delete options.getNormalizer),memoize(fn.bind(this),options)}})),lazy(props)}}(memoizee),value$1=requireValidValue(),objPropertyIsEnumerable=Object.prototype.propertyIsEnumerable,toPosInt=requireToPosInteger(),callable=requireValidCallable(),value=requireValidValue(),objHasOwnProperty=Object.prototype.hasOwnProperty,call=Function.prototype.call,indexOf=eIndexOf,filter=Array.prototype.filter;isFirst=function(value,index){return indexOf.call(this,value)===index};var assign$1=assign$3,includes=contains$2,forOwn=forEach$5,onlyKey=function(obj){var i;for(i in value$1(obj),obj)if(objPropertyIsEnumerable.call(obj,i))return i;return null},forEachRight=function(cb){var i,self,thisArg;for(self=Object(value(this)),callable(cb),thisArg=arguments[1],i=toPosInt(self.length)-1;i>=0;--i)objHasOwnProperty.call(self,i)&&call.call(cb,thisArg,self[i],i,self)},uniq=function(){return filter.call(this,isFirst,this)},sgr$1=function(code){return"["+code+"m"};sgr$1.CSI="[";var mods$1=assign$1({bold:{_bold:[1,22]},italic:{_italic:[3,23]},underline:{_underline:[4,24]},blink:{_blink:[5,25]},inverse:{_inverse:[7,27]},strike:{_strike:[9,29]}},["black","red","green","yellow","blue","magenta","cyan","white"].reduce((function(obj,color,index){return obj[color]={_fg:[30+index,39]},obj[color+"Bright"]={_fg:[90+index,39]},obj["bg"+color[0].toUpperCase()+color.slice(1)]={_bg:[40+index,49]},obj["bg"+color[0].toUpperCase()+color.slice(1)+"Bright"]={_bg:[100+index,49]},obj}),{}));sgr$1.mods=mods$1,sgr$1.openers={},sgr$1.closers={},forOwn(mods$1,(function(mod){var modPair=mod[onlyKey(mod)];sgr$1.openers[modPair[0]]=modPair,sgr$1.closers[modPair[1]]=modPair})),sgr$1.openStyle=function(openedMods,code){openedMods.push(sgr$1.openers[code])},sgr$1.closeStyle=function(openedMods,code){forEachRight.call(openedMods,(function(modPair,index){modPair[1]===code&&openedMods.splice(index,1)}))},sgr$1.prepend=function(currentMods){return currentMods.map((function(modPair){return sgr$1(modPair[0])}))},sgr$1.complete=function(openedMods,closerCodes){return closerCodes.forEach((function(code){sgr$1.closeStyle(openedMods,code)})),openedMods=(openedMods=openedMods.reverse()).map((function(modPair){return modPair[1]})),(openedMods=uniq.call(openedMods)).map(sgr$1)};sgr$1.hasCSI=function(str){return includes.call(str,"[")};sgr$1.extractCode=function(csi){var code=csi.slice(2,-1);return code=Number(code)};var xtermColors,hasRequiredXtermColors,xtermMatch$1,hasRequiredXtermMatch,sgr_1=sgr$1,state=null;var getFn,d$1=dExports,assign=assign$3,forEach=forEach$5,map=map$2,primitiveSet=primitiveSet$1,setPrototypeOf=setPrototypeOf$1,memoize=memoizee,memoizeMethods=methods,sgr=sgr_1,supportsColor={enableColor:function(){state=!0},disableColor:function(){state=!1},autoDetectSupport:function(){state=null},isColorSupported:function(){return null===state?!process.env.NO_COLOR:state}},mods=sgr.mods,join=Array.prototype.join,defineProperty=Object.defineProperty,max=Math.max,min=Math.min,variantModes=primitiveSet("_fg","_bg"),xtermMatch="win32"===process.platform?function(){if(hasRequiredXtermMatch)return xtermMatch$1;hasRequiredXtermMatch=1;var colors,match,result,i,push=Array.prototype.push,reduce=Array.prototype.reduce,abs=Math.abs;for(colors=(hasRequiredXtermColors?xtermColors:(hasRequiredXtermColors=1,xtermColors=["000000","800000","008000","808000","000080","800080","008080","c0c0c0","808080","ff0000","00ff00","ffff00","0000ff","ff00ff","00ffff","ffffff","000000","00005f","000087","0000af","0000d7","0000ff","005f00","005f5f","005f87","005faf","005fd7","005fff","008700","00875f","008787","0087af","0087d7","0087ff","00af00","00af5f","00af87","00afaf","00afd7","00afff","00d700","00d75f","00d787","00d7af","00d7d7","00d7ff","00ff00","00ff5f","00ff87","00ffaf","00ffd7","00ffff","5f0000","5f005f","5f0087","5f00af","5f00d7","5f00ff","5f5f00","5f5f5f","5f5f87","5f5faf","5f5fd7","5f5fff","5f8700","5f875f","5f8787","5f87af","5f87d7","5f87ff","5faf00","5faf5f","5faf87","5fafaf","5fafd7","5fafff","5fd700","5fd75f","5fd787","5fd7af","5fd7d7","5fd7ff","5fff00","5fff5f","5fff87","5fffaf","5fffd7","5fffff","870000","87005f","870087","8700af","8700d7","8700ff","875f00","875f5f","875f87","875faf","875fd7","875fff","878700","87875f","878787","8787af","8787d7","8787ff","87af00","87af5f","87af87","87afaf","87afd7","87afff","87d700","87d75f","87d787","87d7af","87d7d7","87d7ff","87ff00","87ff5f","87ff87","87ffaf","87ffd7","87ffff","af0000","af005f","af0087","af00af","af00d7","af00ff","af5f00","af5f5f","af5f87","af5faf","af5fd7","af5fff","af8700","af875f","af8787","af87af","af87d7","af87ff","afaf00","afaf5f","afaf87","afafaf","afafd7","afafff","afd700","afd75f","afd787","afd7af","afd7d7","afd7ff","afff00","afff5f","afff87","afffaf","afffd7","afffff","d70000","d7005f","d70087","d700af","d700d7","d700ff","d75f00","d75f5f","d75f87","d75faf","d75fd7","d75fff","d78700","d7875f","d78787","d787af","d787d7","d787ff","d7af00","d7af5f","d7af87","d7afaf","d7afd7","d7afff","d7d700","d7d75f","d7d787","d7d7af","d7d7d7","d7d7ff","d7ff00","d7ff5f","d7ff87","d7ffaf","d7ffd7","d7ffff","ff0000","ff005f","ff0087","ff00af","ff00d7","ff00ff","ff5f00","ff5f5f","ff5f87","ff5faf","ff5fd7","ff5fff","ff8700","ff875f","ff8787","ff87af","ff87d7","ff87ff","ffaf00","ffaf5f","ffaf87","ffafaf","ffafd7","ffafff","ffd700","ffd75f","ffd787","ffd7af","ffd7d7","ffd7ff","ffff00","ffff5f","ffff87","ffffaf","ffffd7","ffffff","080808","121212","1c1c1c","262626","303030","3a3a3a","444444","4e4e4e","585858","626262","6c6c6c","767676","808080","8a8a8a","949494","9e9e9e","a8a8a8","b2b2b2","bcbcbc","c6c6c6","d0d0d0","dadada","e4e4e4","eeeeee"])).map((function(color){return{r:parseInt(color.slice(0,2),16),g:parseInt(color.slice(2,4),16),b:parseInt(color.slice(4),16)}})),match=colors.slice(0,16),xtermMatch$1=result=[],i=0;i<8;)result.push(30+i++);for(i=0;i<8;)result.push(90+i++);return push.apply(result,colors.slice(16).map((function(data){var index,diff=1/0;return match.every((function(innerMatch,currentIndex){var ndiff=reduce.call("rgb",(function(currentDiff,channel){return currentDiff+=abs(innerMatch[channel]-data[channel])}),0);return ndiff<diff&&(index=currentIndex,diff=ndiff),ndiff})),result[index]}))),xtermMatch$1}():null,memoized=memoize((function(scope,mod){return defineProperty(getFn(),"_cliColorData",d$1(assign({},scope._cliColorData,mod)))})),proto=Object.create(Function.prototype,assign(map(mods,(function(mod){return d$1.gs((function(){return memoized(this,mod)}))})),memoizeMethods({xterm:d$1((function(code){return code=isNaN(code)?255:min(max(code,0),255),defineProperty(getFn(),"_cliColorData",d$1(assign({},this._cliColorData,{_fg:[xtermMatch?xtermMatch[code]:"38;5;"+code,39]})))})),bgXterm:d$1((function(code){return code=isNaN(code)?255:min(max(code,0),255),defineProperty(getFn(),"_cliColorData",d$1(assign({},this._cliColorData,{_bg:[xtermMatch?xtermMatch[code]+10:"48;5;"+code,49]})))}))}))),getEndRe=memoize((function(code){return new RegExp("\\["+code+"m","g")}),{primitive:!0});getFn=function(){return setPrototypeOf((function self(){var start="",end="",msg=join.call(arguments," "),conf=self._cliColorData,hasAnsi=sgr.hasCSI(msg);return forEach(conf,(function(mod,key){end=sgr(mod[1])+end,start+=sgr(mod[0]),hasAnsi&&(msg=msg.replace(getEndRe(mod[1]),variantModes[key]?sgr(mod[0]):""))}),null,!0),supportsColor.isColorSupported()?start+msg+end:msg}),proto)};var hasRequiredWindowSize,erase,hasRequiredErase,isImplemented$1,hasRequiredIsImplemented$1,shim$1,hasRequiredShim$1,trunc,hasRequiredTrunc,move,hasRequiredMove,beep,hasRequiredBeep,generate,hasRequiredGenerate,isArrayLike,hasRequiredIsArrayLike,is,hasRequiredIs,validateObject,hasRequiredValidateObject,isImplemented,hasRequiredIsImplemented,shim,hasRequiredShim,repeat,hasRequiredRepeat,regexAnsi,hasRequiredRegexAnsi,strip,hasRequiredStrip,getStrippedLength,hasRequiredGetStrippedLength,columns,hasRequiredColumns,slice,hasRequiredSlice,bare=Object.defineProperties(getFn(),{xtermSupported:d$1(!xtermMatch),_cliColorData:d$1("",{})}),windowSize={};function requireTrunc(){return hasRequiredTrunc||(hasRequiredTrunc=1,trunc=(hasRequiredIsImplemented$1||(hasRequiredIsImplemented$1=1,isImplemented$1=function(){var trunc=Math.trunc;return"function"==typeof trunc&&13===trunc(13.67)&&-13===trunc(-13.67)}),isImplemented$1)()?Math.trunc:function(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var floor=Math.floor;return shim$1=function(value){return isNaN(value)?NaN:0===(value=Number(value))?value:value===1/0?1/0:value===-1/0?-1/0:value>0?floor(value):-floor(-value)},shim$1}()),trunc}function requireGenerate(){if(hasRequiredGenerate)return generate;hasRequiredGenerate=1;var toPosInt=requireToPosInteger(),value=requireValidValue(),slice=Array.prototype.slice;return generate=function(length){var arr,currentLength;if(0===(length=toPosInt(value(length))))return[];for(arr=arguments.length<2?[void 0]:slice.call(arguments,1,1+length);(currentLength=arr.length)<length;)arr=arr.concat(arr.slice(0,length-currentLength));return arr},generate}function requireIsArrayLike(){if(hasRequiredIsArrayLike)return isArrayLike;hasRequiredIsArrayLike=1;var isFunction=requireIsFunction(),isObject=requireIsObject(),isValue=requireIsValue();return isArrayLike=function(value){return isValue(value)&&"number"==typeof value.length&&(isObject(value)&&!isFunction(value)||"string"==typeof value)||!1},isArrayLike}function requireIs(){if(hasRequiredIs)return is;hasRequiredIs=1;var iteratorSymbol=requireEs6Symbol().iterator,isValue=requireIsValue(),isArrayLike=requireIsArrayLike();return is=function(value){return!!isValue(value)&&("function"==typeof value[iteratorSymbol]||isArrayLike(value))},is}function requireRepeat(){return hasRequiredRepeat||(hasRequiredRepeat=1,repeat=(hasRequiredIsImplemented?isImplemented:(hasRequiredIsImplemented=1,isImplemented=function(){return"function"==typeof"foo".repeat&&"foofoo"==="foo".repeat(2)}))()?String.prototype.repeat:function(){if(hasRequiredShim)return shim;hasRequiredShim=1;var value=requireValidValue(),toInteger=requireToInteger();return shim=function(count){var result,str=String(value(this));if((count=toInteger(count))<0)throw new RangeError("Count must be >= 0");if(!isFinite(count))throw new RangeError("Count must be < ∞");for(result="";count;)count%2&&(result+=str),count>1&&(str+=str),count>>=1;return result},shim}()),repeat}function requireRegexAnsi(){return hasRequiredRegexAnsi?regexAnsi:(hasRequiredRegexAnsi=1,regexAnsi=function(){return new RegExp("[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)|(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))","g")})}function requireStrip(){if(hasRequiredStrip)return strip;hasRequiredStrip=1;var stringifiable=requireValidateStringifiable(),r=requireRegexAnsi()();return strip=function(str){return stringifiable(str).replace(r,"")},strip}function requireGetStrippedLength(){if(hasRequiredGetStrippedLength)return getStrippedLength;hasRequiredGetStrippedLength=1;var strip=requireStrip();return getStrippedLength=function(str){return strip(str).length},getStrippedLength}var compose,hasRequiredCompose,hasRequiredThrobber,reset,hasRequiredReset,validObject,hasRequiredValidObject,throbber={exports:{}};function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;var isValue=requireIsValue(),callable=requireValidCallable(),aFrom=requireFrom(),apply=Function.prototype.apply,call=Function.prototype.call,callFn=function(arg,fn){return call.call(fn,this,arg)};return compose=function(fnIgnored){var fns,first,args=aFrom(arguments);return(fns=isValue(this)?[this].concat(args):args).forEach(callable),fns=fns.reverse(),first=fns[0],fns=fns.slice(1),function(argIgnored){return fns.reduce(callFn,apply.call(first,this,arguments))}},compose}var clear,hasRequiredClear,ensure,hasRequiredEnsure,copy,hasRequiredCopy,autoBind,hasRequiredAutoBind,es6Iterator,hasRequiredEs6Iterator,hasRequiredArray,array={exports:{}};function requireClear(){if(hasRequiredClear)return clear;hasRequiredClear=1;var value=requireValidValue();return clear=function(){return value(this).length=0,this}}function requireCopy(){if(hasRequiredCopy)return copy;hasRequiredCopy=1;var aFrom=requireFrom(),assign=assign$3,value=requireValidValue();return copy=function(obj){var copy=Object(value(obj)),propertyNames=arguments[1],options=Object(arguments[2]);if(copy!==obj&&!propertyNames)return copy;var result={};return propertyNames?aFrom(propertyNames,(function(propertyName){(options.ensure||propertyName in obj)&&(result[propertyName]=obj[propertyName])})):assign(result,obj),result},copy}function requireAutoBind(){if(hasRequiredAutoBind)return autoBind;hasRequiredAutoBind=1;var define,isValue=is$6,ensureValue=ensure$1,ensurePlainFunction=function(){if(hasRequiredEnsure)return ensure;hasRequiredEnsure=1;var resolveException=resolveException$1,is=is$2;return ensure=function(value){if(is(value))return value;var options=arguments[1],errorMessage=options&&options.name?"Expected a plain function for %n, received %v":"%v is not a plain function";return resolveException(value,errorMessage,options)},ensure}(),copy=requireCopy(),normalizeOptions$1=normalizeOptions,map=map$2,bind=Function.prototype.bind,defineProperty=Object.defineProperty,hasOwnProperty=Object.prototype.hasOwnProperty;return define=function(name,desc,options){var dgs,value=ensureValue(desc)&&ensurePlainFunction(desc.value);return delete(dgs=copy(desc)).writable,delete dgs.value,dgs.get=function(){return!options.overwriteDefinition&&hasOwnProperty.call(this,name)?value:(desc.value=bind.call(value,options.resolveContext?options.resolveContext(this):this),defineProperty(this,name,desc),this[name])},dgs},autoBind=function(props){var options=normalizeOptions$1(arguments[1]);return isValue(options.resolveContext)&&ensurePlainFunction(options.resolveContext),map(props,(function(desc,name){return define(name,desc,options)}))},autoBind}function requireEs6Iterator(){if(hasRequiredEs6Iterator)return es6Iterator;hasRequiredEs6Iterator=1;var Iterator,clear=requireClear(),assign=assign$3,callable=requireValidCallable(),value=requireValidValue(),d=dExports,autoBind=requireAutoBind(),Symbol=requireEs6Symbol(),defineProperty=Object.defineProperty,defineProperties=Object.defineProperties;return es6Iterator=Iterator=function(list,context){if(!(this instanceof Iterator))throw new TypeError("Constructor requires 'new'");defineProperties(this,{__list__:d("w",value(list)),__context__:d("w",context),__nextIndex__:d("w",0)}),context&&(callable(context.on),context.on("_add",this._onAdd),context.on("_delete",this._onDelete),context.on("_clear",this._onClear))},delete Iterator.prototype.constructor,defineProperties(Iterator.prototype,assign({_next:d((function(){var i;if(this.__list__)return this.__redo__&&void 0!==(i=this.__redo__.shift())?i:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()})),next:d((function(){return this._createResult(this._next())})),_createResult:d((function(i){return void 0===i?{done:!0,value:void 0}:{done:!1,value:this._resolve(i)}})),_resolve:d((function(i){return this.__list__[i]})),_unBind:d((function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)})),toString:d((function(){return"[object "+(this[Symbol.toStringTag]||"Object")+"]"}))},autoBind({_onAdd:d((function(index){index>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach((function(redo,i){redo>=index&&(this.__redo__[i]=++redo)}),this),this.__redo__.push(index)):defineProperty(this,"__redo__",d("c",[index])))})),_onDelete:d((function(index){var i;index>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(i=this.__redo__.indexOf(index))&&this.__redo__.splice(i,1),this.__redo__.forEach((function(redo,j){redo>index&&(this.__redo__[j]=--redo)}),this)))})),_onClear:d((function(){this.__redo__&&clear.call(this.__redo__),this.__nextIndex__=0}))}))),defineProperty(Iterator.prototype,Symbol.iterator,d((function(){return this}))),es6Iterator}var hasRequiredString,isIterable,hasRequiredIsIterable,validIterable,hasRequiredValidIterable,get,hasRequiredGet,forOf,hasRequiredForOf,art,hasRequiredArt,string={exports:{}};function requireIsIterable(){if(hasRequiredIsIterable)return isIterable;hasRequiredIsIterable=1;var isArguments=requireIsArguments(),isValue=requireIsValue(),isString=requireIsString(),iteratorSymbol=requireEs6Symbol().iterator,isArray=Array.isArray;return isIterable=function(value){return!!isValue(value)&&(!!isArray(value)||(!!isString(value)||(!!isArguments(value)||"function"==typeof value[iteratorSymbol])))},isIterable}function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var isArguments=requireIsArguments(),isString=requireIsString(),ArrayIterator=function(){if(hasRequiredArray)return array.exports;hasRequiredArray=1;var ArrayIterator,setPrototypeOf=setPrototypeOf$1,contains=contains$2,d=dExports,Symbol=requireEs6Symbol(),Iterator=requireEs6Iterator(),defineProperty=Object.defineProperty;return ArrayIterator=array.exports=function(arr,kind){if(!(this instanceof ArrayIterator))throw new TypeError("Constructor requires 'new'");Iterator.call(this,arr),kind=kind?contains.call(kind,"key+value")?"key+value":contains.call(kind,"key")?"key":"value":"value",defineProperty(this,"__kind__",d("",kind))},setPrototypeOf&&setPrototypeOf(ArrayIterator,Iterator),delete ArrayIterator.prototype.constructor,ArrayIterator.prototype=Object.create(Iterator.prototype,{_resolve:d((function(i){return"value"===this.__kind__?this.__list__[i]:"key+value"===this.__kind__?[i,this.__list__[i]]:i}))}),defineProperty(ArrayIterator.prototype,Symbol.toStringTag,d("c","Array Iterator")),array.exports}(),StringIterator=function(){if(hasRequiredString)return string.exports;hasRequiredString=1;var StringIterator,setPrototypeOf=setPrototypeOf$1,d=dExports,Symbol=requireEs6Symbol(),Iterator=requireEs6Iterator(),defineProperty=Object.defineProperty;return StringIterator=string.exports=function(str){if(!(this instanceof StringIterator))throw new TypeError("Constructor requires 'new'");str=String(str),Iterator.call(this,str),defineProperty(this,"__length__",d("",str.length))},setPrototypeOf&&setPrototypeOf(StringIterator,Iterator),delete StringIterator.prototype.constructor,StringIterator.prototype=Object.create(Iterator.prototype,{_next:d((function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()})),_resolve:d((function(i){var code,char=this.__list__[i];return this.__nextIndex__===this.__length__?char:(code=char.charCodeAt(0))>=55296&&code<=56319?char+this.__list__[this.__nextIndex__++]:char}))}),defineProperty(StringIterator.prototype,Symbol.toStringTag,d("c","String Iterator")),string.exports}(),iterable=function(){if(hasRequiredValidIterable)return validIterable;hasRequiredValidIterable=1;var isIterable=requireIsIterable();return validIterable=function(value){if(!isIterable(value))throw new TypeError(value+" is not iterable");return value},validIterable}(),iteratorSymbol=requireEs6Symbol().iterator;return get=function(obj){return"function"==typeof iterable(obj)[iteratorSymbol]?obj[iteratorSymbol]():isArguments(obj)?new ArrayIterator(obj):isString(obj)?new StringIterator(obj):new ArrayIterator(obj)}}function requireForOf(){if(hasRequiredForOf)return forOf;hasRequiredForOf=1;var isArguments=requireIsArguments(),callable=requireValidCallable(),isString=requireIsString(),get=requireGet(),isArray=Array.isArray,call=Function.prototype.call,some=Array.prototype.some;return forOf=function(iterable,cb){var mode,result,doBreak,broken,i,length,char,code,thisArg=arguments[2];if(isArray(iterable)||isArguments(iterable)?mode="array":isString(iterable)?mode="string":iterable=get(iterable),callable(cb),doBreak=function(){broken=!0},"array"!==mode)if("string"!==mode)for(result=iterable.next();!result.done;){if(call.call(cb,thisArg,result.value,doBreak),broken)return;result=iterable.next()}else for(length=iterable.length,i=0;i<length&&(char=iterable[i],i+1<length&&(code=char.charCodeAt(0))>=55296&&code<=56319&&(char+=iterable[++i]),call.call(cb,thisArg,char,doBreak),!broken);++i);else some.call(iterable,(function(value){return call.call(cb,thisArg,value,doBreak),broken}))},forOf}var d=dExports,cliColor=Object.defineProperties(bare,{windowSize:d((hasRequiredWindowSize||(hasRequiredWindowSize=1,function(exports){var d=dExports;Object.defineProperties(exports,{width:d.gs("ce",(function(){return process.stdout.columns||0})),height:d.gs("ce",(function(){return process.stdout.rows||0}))})}(windowSize)),windowSize)),erase:d(hasRequiredErase?erase:(hasRequiredErase=1,erase={screen:"[2J",screenLeft:"[1J",screenRight:"[J",line:"[2K",lineLeft:"[1K",lineRight:"[K"})),move:d(function(){if(hasRequiredMove)return move;hasRequiredMove=1;var up,down,right,left,d=dExports,trunc=requireTrunc(),abs=Math.abs,floor=Math.floor,max=Math.max,getMove=function(control){return function(num){return(num=isNaN(num)?0:max(floor(num),0))?"["+num+control:""}};return move=Object.defineProperties((function(x,y){return x=isNaN(x)?0:floor(x),y=isNaN(y)?0:floor(y),(x>0?right(x):left(-x))+(y>0?down(y):up(-y))}),{up:d(up=getMove("A")),down:d(down=getMove("B")),right:d(right=getMove("C")),left:d(left=getMove("D")),to:d((function(x,y){return x=isNaN(x)?1:max(floor(x),0)+1,"["+(y=isNaN(y)?1:max(floor(y),0)+1)+";"+x+"H"})),lines:d((function(n){var dir;return dir=(n=trunc(n)||0)>=0?"B":"A","["+(n=floor(abs(n)))+dir+"[1G"})),top:d("[5000F"),bottom:d("[5000B"),lineBegin:d("[5000D"),lineEnd:d("[5000C")})}()),beep:d(hasRequiredBeep?beep:(hasRequiredBeep=1,beep="")),columns:d(function(){if(hasRequiredColumns)return columns;hasRequiredColumns=1;var generate=requireGenerate(),from=requireFrom(),iterable=function(){if(hasRequiredValidateObject)return validateObject;hasRequiredValidateObject=1;var isObject=requireIsObject(),is=requireIs();return validateObject=function(value){if(is(value)&&isObject(value))return value;throw new TypeError(value+" is not an iterable or array-like object")},validateObject}(),isValue=requireIsValue(),stringifiable=requireValidateStringifiable(),repeat=requireRepeat(),getStrippedLength=requireGetStrippedLength(),push=Array.prototype.push;return columns=function(inputRows){var options=Object(arguments[1]),colsMeta=[],colsOptions=options.columns||[],rows=[];return from(iterable(inputRows),(function(row){var rowRows=[[]];from(iterable(row),(function(cellStr,columnIndex){for(var cellRows=stringifiable(cellStr).split("\n");cellRows.length>rowRows.length;)rowRows.push(generate(columnIndex,""));cellRows.forEach((function(cellRow,rowRowIndex){rowRows[rowRowIndex][columnIndex]=cellRow}))})),push.apply(rows,rowRows)})),rows.map((function(row){return from(iterable(row),(function(str,index){var strLength,col=colsMeta[index];return col||(col=colsMeta[index]={width:0}),str=stringifiable(str),(strLength=getStrippedLength(str))>col.width&&(col.width=strLength),{str:str,length:strLength}}))})).map((function(row){return row.map((function(item,index){var pad,align,colOptions=colsOptions&&colsOptions[index];return align=colOptions&&"right"===colOptions.align?"right":"left",pad=repeat.call(" ",colsMeta[index].width-item.length),"left"===align?item.str+pad:pad+item.str})).join(isValue(options.sep)?options.sep:" | ")})).join("\n")+"\n"},columns}()),strip:d(requireStrip()),getStrippedLength:d(requireGetStrippedLength()),slice:d(function(){if(hasRequiredSlice)return slice;hasRequiredSlice=1;var reAnsi=requireRegexAnsi(),stringifiable=requireValidateStringifiableValue(),length=requireGetStrippedLength(),sgr=sgr_1,max=Math.max,Token=function(token){this.token=token},tokenize=function(str){var match=reAnsi().exec(str);if(!match)return[str];var head,prehead,tail,index=match.index;return 0===index?(head=match[0],tail=str.slice(head.length),[new Token(head)].concat(tokenize(tail))):(prehead=str.slice(0,index),head=match[0],tail=str.slice(index+head.length),[prehead,new Token(head)].concat(tokenize(tail)))};return slice=function(str){var seq,len,begin=Number(arguments[1]),end=Number(arguments[2]);return str=stringifiable(str),len=length(str),isNaN(begin)&&(begin=0),isNaN(end)&&(end=len),begin<0&&(begin=max(len+begin,0)),end<0&&(end=max(len+end,0)),seq=function(seq,begin,end){var sliced=seq.reduce((function(state,chunk){var index=state.index;if(chunk instanceof Token){var code=sgr.extractCode(chunk.token);index<=begin?(code in sgr.openers&&sgr.openStyle(state.preOpeners,code),code in sgr.closers&&sgr.closeStyle(state.preOpeners,code)):index<end&&(code in sgr.openers?(sgr.openStyle(state.inOpeners,code),state.seq.push(chunk)):code in sgr.closers&&(state.inClosers.push(code),state.seq.push(chunk)))}else{var nextChunk="";if(function(chunk,index,begin,end){return!(begin>chunk.length+index||end<index)}(chunk,index,begin,end)){var relBegin=Math.max(begin-index,0),relEnd=Math.min(end-index,chunk.length);nextChunk=chunk.slice(relBegin,relEnd)}state.seq.push(nextChunk),state.index=index+chunk.length}return state}),{index:0,seq:[],preOpeners:[],inOpeners:[],inClosers:[]});return sliced.seq=[].concat(sgr.prepend(sliced.preOpeners),sliced.seq,sgr.complete([].concat(sliced.preOpeners,sliced.inOpeners),sliced.inClosers)),sliced.seq}(seq=tokenize(str),begin,end),seq.map((function(chunk){return chunk instanceof Token?chunk.token:chunk})).join("")},slice}()),throbber:d((hasRequiredThrobber||(hasRequiredThrobber=1,function(module,exports){var ThrobberIterator,compose=requireCompose(),callable=requireValidCallable(),d=dExports,validTimeout=requireValidTimeout();ThrobberIterator=function(){},Object.defineProperties(ThrobberIterator.prototype,{index:d(-1),running:d(!1),next:d((function(){var str=this.running?"\b":"";return this.running||(this.running=!0),str+"-\\|/"[this.index=(this.index+1)%4]})),reset:d((function(){return this.running?(this.index=-1,this.running=!1,"\b"):""}))}),module.exports=exports=function(write,interval){var token,format=arguments[2],iterator=new ThrobberIterator;return callable(write),interval=validTimeout(interval),void 0!==format&&(write=compose.call(write,callable(format))),{start:function(){token||(token=setInterval((function(){write(iterator.next())}),interval))},restart:function(){this.stop(),this.start()},stop:function(){token&&(clearInterval(token),token=null,write(iterator.reset()))}}},Object.defineProperty(exports,"Iterator",d(ThrobberIterator))}(throbber,throbber.exports)),throbber.exports)),reset:d(hasRequiredReset?reset:(hasRequiredReset=1,reset="[2J[0;0H")),art:d(function(){if(hasRequiredArt)return art;hasRequiredArt=1;var object=function(){if(hasRequiredValidObject)return validObject;hasRequiredValidObject=1;var isObject=requireIsObject();return validObject=function(value){if(!isObject(value))throw new TypeError(value+" is not an Object");return value},validObject}(),stringifiable=requireValidateStringifiableValue(),forOf=requireForOf();return art=function(text,style){var result="";return text=stringifiable(text),object(style),forOf(text,(function(char){result+=style[char]||char})),result}}())}),clc=getDefaultExportFromCjs(cliColor);const checkExecaInfoNoError=info=>!(info.failed||info.killed||info.timedOut||info.isCanceled),outputRes=(msg,_color=46,isBr=!0)=>{const _colorText=clc.xterm(_color);isBr?console.log(`${_colorText(msg)}\n`):console.log(`${_colorText(msg)}`)},pullLocalBranch=branchTypeFlag=>__awaiter(void 0,void 0,void 0,(function*(){const gitInvoker=new GitInvoker,_branchInfo=yield gitInvoker.executeCmd("branch",{});if(_branchInfo&&checkExecaInfoNoError(_branchInfo)){const _branchs=_branchInfo.stdout.split("\n").map((item=>({name:item,value:item})));return yield InquirerService.select(`选择${branchTypeFlag}的分支:`,_branchs)}return outputRes("拉取分支失败",124,!1),""}));class InquirerService{static prompt(questions){return __awaiter(this,void 0,void 0,(function*(){try{return yield inquirer.prompt(questions)}catch(error){throw outputRes("用户输入时出现错误:"+error,124),error}}))}static confirm(message,defaultValue){return __awaiter(this,void 0,void 0,(function*(){return(yield this.prompt([{type:"confirm",name:"result",message:message,default:defaultValue}])).result}))}static select(message,choices){return __awaiter(this,void 0,void 0,(function*(){return(yield this.prompt([{type:"list",name:"result",message:message,choices:choices,loop:!1}])).result}))}}class CMCommand{createCommand(){return new Command("commit").alias("cm").description("创建带有消息的提交Commit").argument("message","提交信息").action((message=>__awaiter(this,void 0,void 0,(function*(){const cmType=yield InquirerService.select("选择提交类型:",COMMITTYPE),gitInvoker=new GitInvoker,_addInfo=yield gitInvoker.executeCmd("add",{});if(!_addInfo||!checkExecaInfoNoError(_addInfo))return;outputRes("[add] 文件添加至暂存区成功");const _cmInfo=yield gitInvoker.executeCmd("commit",{msg:cmType+message});if(!_cmInfo||!checkExecaInfoNoError(_cmInfo))return;outputRes("[commit] 本地仓库提交信息成功");if(yield InquirerService.confirm("是否推送到远端分支?",!0)){const _pushRes=yield gitInvoker.executeCmd("push",{});if(!_pushRes||!checkExecaInfoNoError(_pushRes))return;outputRes("[push] 推送到远端仓库成功")}else outputRes("未推送到远端仓库，请自行处理",46,!1)}))))}}class PUSHCommand{createCommand(){return new Command("push").alias("ps").description("处理pull之后会进入push阶段").action((()=>__awaiter(this,void 0,void 0,(function*(){const gitInvoker=new GitInvoker,_pullInfo=yield gitInvoker.executeCmd("pull",{});if(!_pullInfo||!checkExecaInfoNoError(_pullInfo))return;outputRes(`[pull] ${_pullInfo.stdout} 进入推送阶段。`);const _pushInfo=yield gitInvoker.executeCmd("push",{});if(!_pushInfo||!checkExecaInfoNoError(_pushInfo))return;const _pushMsg=_pushInfo.stdout||_pushInfo.stderr;outputRes(`[push] ${_pushMsg} ！ready ！`)}))))}}class CKBCommand{createCommand(){return new Command("checkout").alias("ckb").description("选择性切换分支").action((()=>__awaiter(this,void 0,void 0,(function*(){const gitInvoker=new GitInvoker;if(4===process.argv.length&&"."===process.argv[3]){const checkoutInfo=yield gitInvoker.executeCmd("checkout",".");if(!checkoutInfo||!checkExecaInfoNoError(checkoutInfo))return;return void outputRes(checkoutInfo.stderr+" — 放弃所有修改",46,!1)}const _branch=yield pullLocalBranch("切换");if(_branch.includes("*"))return void outputRes(`已在当前分支 ${_branch}`,120,!1);const _checkoutInfo=yield gitInvoker.executeCmd("checkout",_branch.replaceAll(" ",""));if(!_checkoutInfo||!checkExecaInfoNoError(_checkoutInfo))return;outputRes(_checkoutInfo.stderr,46,!1);if(yield InquirerService.confirm("是否拉取当前远端最新代码?",!0)){const _pullInfo=yield gitInvoker.executeCmd("pull",{});if(!_pullInfo||!checkExecaInfoNoError(_pullInfo))return;outputRes("[pull]拉取完成",46,!1)}else outputRes("未拉取远端代码，请自行处理",46,!1)}))))}}class DelCommand{createCommand(){return new Command("del-branch").alias("d").description("删除分支").argument("<branch>","要删除的分支").option("-f, --force","强制删除分支 (忽略警告)",!1).action(((branchName,options)=>__awaiter(this,void 0,void 0,(function*(){const gitInvoker=new GitInvoker,_branchInfo=yield gitInvoker.executeCmd("branch",{force:options.force,branchName:branchName});_branchInfo&&checkExecaInfoNoError(_branchInfo)&&outputRes(_branchInfo.stdout,46,!1)}))))}}class RbCommand{createCommand(){return new Command("rebase").alias("rb").description("变基处理：强烈建议不要在公共分支处理变基操作").argument("<branch>","要删除的分支").action((branchName=>__awaiter(this,void 0,void 0,(function*(){const gitInvoker=new GitInvoker;outputRes(`开始拉取 ${branchName} 分支远端最新代码到本地[注：此分支只拉取不合并]`,51);const _fetchInfo=yield gitInvoker.executeCmd("fetch",{branch:branchName});if(!_fetchInfo||!checkExecaInfoNoError(_fetchInfo))return;outputRes("拉取远端代码成功，开始执行变基操作",51);const _rebaseInfo=yield gitInvoker.executeCmd("rebase",{branch:`origin/${branchName}`});_rebaseInfo&&checkExecaInfoNoError(_rebaseInfo)&&outputRes("变基成功",51)}))))}}class MgCommand{createCommand(){return new Command("merge").alias("mg").action((()=>__awaiter(this,void 0,void 0,(function*(){const gitInvoker=new GitInvoker,branchName=yield pullLocalBranch("合并");if(branchName.includes("*"))return void outputRes("请选择其他分支进行merge",120,!1);const _mergeInfo=yield gitInvoker.executeCmd("merge",{branchName:branchName.replaceAll(" ","")});_mergeInfo&&checkExecaInfoNoError(_mergeInfo)&&outputRes("合并完成")}))))}}class DrcCommand{createCommand(){return new Command("deal-rebase-clash").alias("drc").description("解决rebase冲突，执行rebase continue").action((()=>__awaiter(this,void 0,void 0,(function*(){const gitInvoker=new GitInvoker,cmType=yield InquirerService.select("选择rebase处理方案:",RabaseType);if(cmType){if("--continue"===cmType){const _addInfo=yield gitInvoker.executeCmd("add",{});if(!_addInfo||!checkExecaInfoNoError(_addInfo))return;outputRes("[add] 文件添加至暂存区成功，继续Rebase");const _rebaseInfo=yield gitInvoker.executeCmd("rebase",{continue:!0});if(!_rebaseInfo||!checkExecaInfoNoError(_rebaseInfo))return;outputRes("[rebase] Rebase continue 成功")}if("--abort"===cmType){const _rebaseInfo=yield gitInvoker.executeCmd("rebase",{abort:!0});if(!_rebaseInfo||!checkExecaInfoNoError(_rebaseInfo))return;outputRes("[rebase] Rebase abort 成功，当前分支回到初始状态")}}}))))}}class PuCommand{createCommand(){return new Command("pull").alias("pu").description("Pull拉取代码").action((()=>__awaiter(this,void 0,void 0,(function*(){const gitInvoker=new GitInvoker,_pullInfo=yield gitInvoker.executeCmd("pull",{});_pullInfo&&checkExecaInfoNoError(_pullInfo)&&outputRes("[pull]拉取完成",46,!1)}))))}}(new class{constructor(){this.program=new Command,this.program.name("EGit").description("EGit，一个简易的git管理工具，拥抱敏捷开发😉").option("-v","1.0.4").action((options=>{options.v?outputRes("\nEGit version：1.0.4",204):(()=>{const msg=clc.xterm(93),msg1=clc.xterm(92),msg2=clc.xterm(91),msg3=clc.xterm(90),msg4=clc.xterm(89);console.log(msg("\n0000000  000000   00 00000000")),console.log(msg1("00      00        00    00    ")),console.log(msg2("00000   00   000  00    00    ")),console.log(msg3("00      00    00  00    00    ")),console.log(msg4("0000000  000000   00    00      \n")),outputRes("----------------------------------------------------------------------------",89),outputRes("EGit，一个简易的git管理工具，拥抱敏捷开发😉",89),outputRes("     用法😄:",89),outputRes("       命令🔥:",89),outputRes("           checkout | ckb  ❤❤ 提供交互选择切换分支 ❤❤",89),outputRes("             commit | cm   ❤❤ 包含了 add commit 以及 push 功能，并优化commit规范 ❤❤",89),outputRes("         del-branch | d    ❤❤ 删除本地分支 ❤❤",89),outputRes("              merge | mg   ❤❤ 提供交互选择合并分支 ❤❤",89),outputRes("               push | ps   ❤❤ 推送本地分支到远程仓库，自动pull最新代码 ❤❤",89),outputRes("               pull | pu   ❤❤ 自动pull最新代码 ❤❤",89),outputRes("             rebase | rb   ❤❤ 变基处理，自动Fetch远端代码并自动merge ❤❤",89),outputRes("  deal-rebase-clash | drc  ❤❤ 解决rebase冲突后的执行流程 ❤❤",89),outputRes("----------------------------------------------------------------------------",89)})()}))}initialize(){this.configureCommands();const commandName=process.argv[1].split("/").pop();"eg"!==commandName&&"egit"!==commandName||this.program.name(commandName),this.program.parseAsync(process.argv).catch((err=>{console.error(err),process.exit(1)}))}configureCommands(){this.program.addCommand((new CMCommand).createCommand()),this.program.addCommand((new PUSHCommand).createCommand()),this.program.addCommand((new CKBCommand).createCommand()),this.program.addCommand((new DelCommand).createCommand()),this.program.addCommand((new RbCommand).createCommand()),this.program.addCommand((new MgCommand).createCommand()),this.program.addCommand((new DrcCommand).createCommand()),this.program.addCommand((new PuCommand).createCommand())}}).initialize();
